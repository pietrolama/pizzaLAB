js-beautify
(v1.15.1)
Beautify JavaScript, JSON, React.js, HTML, CSS, SCSS, and SASS

Enable Dark Mode

Beautify JavaScript
Beautify Code (ctrlâ€‘enter)

Copy to Clipboard
 
Select All
 
Clear
 Nessun file selezionato
Options

Indent with 4 spaces

Allow 5 newlines between tokens

Do not wrap lines

Braces with control statement
HTML <style>, <script> formatting:


Add one indent level
   End script and style with newline?
Support e4x/jsx syntax
Use comma-first list style?
Detect packers and obfuscators? (unsafe)
Preserve inline braces/code blocks?
Keep array indentation?
Break lines on chained methods?
Space before conditional: "if(x)" / "if (x)"
Unescape printable chars encoded as \xNN or \uNNNN?
Use JSLint-happy formatting tweaks?
Indent <head> and <body> sections?
Keep indentation on empty lines?
Use a simple textarea for code input? 
Additional Settings (JSON):

{}
Your Selected Options (JSON):

{
  "indent_size": "4",
  "indent_char": " ",
  "max_preserve_newlines": "5",
  "preserve_newlines": true,
  "keep_array_indentation": false,
  "break_chained_methods": false,
  "indent_scripts": "normal",
  "brace_style": "collapse",
  "space_before_conditional": true,
  "unescape_strings": false,
  "jslint_happy": false,
  "end_with_newline": false,
  "wrap_line_length": "0",
  "indent_inner_html": false,
  "comma_first": false,
  "e4x": false,
  "indent_empty_lines": false
}
Created by Einar Lielmanis, maintained and evolved by Liam Newman.

All of the source code is completely free and open, available on GitHub under MIT licence, and we have a command-line version, python library and a node package as well.

We use the wonderful CodeMirror syntax highlighting editor, written by Marijn Haverbeke.

Made with a great help of many contributors. Special thanks to:
Jason Diamond, Patrick Hof, Nochum Sossonko, Andreas Schneider, Dave Vasilevsky, Vital Batmanov, Ron Baldwin, Gabriel Harrison, Chris J. Shull, Mathias Bynens, Vittorio Gambaletta, Stefano Sanfilippo and Daniel Stockman.

1
        var scripts = document.getElementsByTagName("script"),
2
            tarteaucitronPath = (document.currentScript || scripts[scripts.length - 1]).src.split("?")[0],
3
            tarteaucitronForceCDN = tarteaucitronForceCDN === undefined ? "" : tarteaucitronForceCDN,
4
            tarteaucitronUseMin = tarteaucitronUseMin === undefined ? "" : tarteaucitronUseMin,
5
            cdn = tarteaucitronForceCDN === "" ? tarteaucitronPath.split("/").slice(0, -1).join("/") + "/" : tarteaucitronForceCDN,
6
            alreadyLaunch = alreadyLaunch === undefined ? 0 : alreadyLaunch,
7
            tarteaucitronForceLanguage = tarteaucitronForceLanguage === undefined ? "" : tarteaucitronForceLanguage,
8
            tarteaucitronForceExpire = tarteaucitronForceExpire === undefined ? "" : tarteaucitronForceExpire,
9
            tarteaucitronCustomText = tarteaucitronCustomText === undefined ? "" : tarteaucitronCustomText,
10
            tarteaucitronExpireInDay = tarteaucitronExpireInDay === undefined || typeof tarteaucitronExpireInDay !== "boolean" ? true : tarteaucitronExpireInDay,
11
            timeExpire = 31536e6,
12
            tarteaucitronProLoadServices, tarteaucitronNoAdBlocker = false,
13
            tarteaucitronIsLoaded = false;
14
        var tarteaucitron = {
15
            version: 1.19,
16
            cdn: cdn,
17
            user: {},
18
            lang: {},
19
            services: {},
20
            added: [],
21
            idprocessed: [],
22
            state: {},
23
            launch: [],
24
            parameters: {},
25
            isAjax: false,
26
            reloadThePage: false,
27
            events: {
28
                init: function() {},
29
                load: function() {}
30
            },
31
            init: function(params) {
32
                "use strict";
33
                var origOpen;
34
                tarteaucitron.parameters = params;
35
                if (alreadyLaunch === 0) {
36
                    alreadyLaunch = 1;
37
                    if (window.addEventListener) {
38
                        window.addEventListener("load", function() {
39
                            tarteaucitron.initEvents.loadEvent(false)
40
                        }, false);
41
                        window.addEventListener("scroll", function() {
42
                            tarteaucitron.initEvents.scrollEvent()
43
                        }, false);
44
                        window.addEventListener("keydown", function(evt) {
45
                            tarteaucitron.initEvents.keydownEvent(false, evt)
46
                        }, false);
47
                        window.addEventListener("hashchange", function() {
48
                            tarteaucitron.initEvents.hashchangeEvent()
49
                        }, false);
50
                        window.addEventListener("resize", function() {
51
                            tarteaucitron.initEvents.resizeEvent()
52
                        }, false)
53
                    } else {
54
                        window.attachEvent("onload", function() {
55
                            tarteaucitron.initEvents.loadEvent(true)
56
                        });
57
                        window.attachEvent("onscroll", function() {
58
                            tarteaucitron.initEvents.scrollEvent()
59
                        });
60
                        window.attachEvent("onkeydown", function(evt) {
61
                            tarteaucitron.initEvents.keydownEvent(true, evt)
62
                        });
63
                        window.attachEvent("onhashchange", function() {
64
                            tarteaucitron.initEvents.hashchangeEvent()
65
                        });
66
                        window.attachEvent("onresize", function() {
67
                            tarteaucitron.initEvents.resizeEvent()
68
                        })
69
                    }
70
                    if (typeof XMLHttpRequest !== "undefined") {
71
                        origOpen = XMLHttpRequest.prototype.open;
72
                        XMLHttpRequest.prototype.open = function() {
73
                            if (window.addEventListener) {
74
                                this.addEventListener("load", function() {
75
                                    if (typeof tarteaucitronProLoadServices === "function") {
76
                                        tarteaucitronProLoadServices()
77
                                    }
78
                                }, false)
79
                            } else if (typeof this.attachEvent !== "undefined") {
80
                                this.attachEvent("onload", function() {
81
                                    if (typeof tarteaucitronProLoadServices === "function") {
82
                                        tarteaucitronProLoadServices()
83
                                    }
84
                                })
85
                            } else {
86
                                if (typeof tarteaucitronProLoadServices === "function") {
87
                                    setTimeout(tarteaucitronProLoadServices, 1e3)
88
                                }
89
                            }
90
                            try {
91
                                origOpen.apply(this, arguments)
92
                            } catch (err) {}
93
                        }
94
                    }
95
                }
96
                if (tarteaucitron.events.init) {
97
                    tarteaucitron.events.init()
98
                }
99
            },
100
            initEvents: {
101
                loadEvent: function(isOldBrowser) {
102
                    tarteaucitron.load();
103
                    tarteaucitron.fallback(["tarteaucitronOpenPanel"], function(elem) {
104
                        if (isOldBrowser) {
105
                            elem.attachEvent("onclick", function(event) {
106
                                tarteaucitron.userInterface.openPanel();
107
                                event.preventDefault()
108
                            })
109
                        } else {
110
                            elem.addEventListener("click", function(event) {
111
                                tarteaucitron.userInterface.openPanel();
112
                                event.preventDefault()
113
                            }, false)
114
                        }
115
                    }, true)
116
                },
117
                keydownEvent: function(isOldBrowser, evt) {
118
                    if (evt.keyCode === 27) {
119
                        tarteaucitron.userInterface.closePanel()
120
                    }
121
                    if (isOldBrowser) {
122
                        if (evt.keyCode === 9 && focusableEls.indexOf(evt.target) >= 0) {
123
                            if (evt.shiftKey) {
124
                                if (document.activeElement === firstFocusableEl) {
125
                                    lastFocusableEl.focus();
126
                                    evt.preventDefault()
127
                                }
128
                            } else {
129
                                if (document.activeElement === lastFocusableEl) {
130
                                    firstFocusableEl.focus();
131
                                    evt.preventDefault()
132
                                }
133
                            }
134
                        }
135
                    }
136
                },
137
                hashchangeEvent: function() {
138
                    if (document.location.hash === tarteaucitron.hashtag && tarteaucitron.hashtag !== "") {
139
                        tarteaucitron.userInterface.openPanel()
140
                    }
141
                },
142
                resizeEvent: function() {
143
                    var tacElem = document.getElementById("tarteaucitron");
144
                    var tacCookieContainer = document.getElementById("tarteaucitronCookiesListContainer");
145
                    if (tacElem && tacElem.style.display === "block") {
146
                        tarteaucitron.userInterface.jsSizing("main")
147
                    }
148
                    if (tacCookieContainer && tacCookieContainer.style.display === "block") {
149
                        tarteaucitron.userInterface.jsSizing("cookie")
150
                    }
151
                },
152
                scrollEvent: function() {
153
                    var scrollPos = window.pageYOffset || document.documentElement.scrollTop;
154
                    var heightPosition;
155
                    var tacPercentage = document.getElementById("tarteaucitronPercentage");
156
                    var tacAlertBig = document.getElementById("tarteaucitronAlertBig");
157
                    if (tacAlertBig && !tarteaucitron.highPrivacy) {
158
                        if (tacAlertBig.style.display === "block") {
159
                            heightPosition = tacAlertBig.offsetHeight + "px";
160
                            if (scrollPos > screen.height * 2) {
161
                                tarteaucitron.userInterface.respondAll(true)
162
                            } else if (scrollPos > screen.height / 2) {
163
                                document.getElementById("tarteaucitronDisclaimerAlert").innerHTML = "<strong>" + tarteaucitron.lang.alertBigScroll + "</strong> " + tarteaucitron.lang.alertBig
164
                            }
165
                            if (tacPercentage) {
166
                                if (tarteaucitron.orientation === "top") {
167
                                    tacPercentage.style.top = heightPosition
168
                                } else {
169
                                    tacPercentage.style.bottom = heightPosition
170
                                }
171
                                tacPercentage.style.width = 100 / (screen.height * 2) * scrollPos + "%"
172
                            }
173
                        }
174
                    }
175
                }
176
            },
177
            load: function() {
178
                "use strict";
179
                if (tarteaucitronIsLoaded === true) {
180
                    return
181
                }
182
                var cdn = tarteaucitron.cdn,
183
                    language = tarteaucitron.getLanguage(),
184
                    useMinifiedJS = cdn.indexOf("cdn.jsdelivr.net") >= 0 || tarteaucitronPath.indexOf(".min.") >= 0 || tarteaucitronUseMin !== "",
185
                    pathToLang = cdn + "lang/tarteaucitron." + language + (useMinifiedJS ? ".min" : "") + ".js",
186
                    pathToServices = cdn + "tarteaucitron.services" + (useMinifiedJS ? ".min" : "") + ".js",
187
                    linkElement = document.createElement("link"),
188
                    defaults = {
189
                        adblocker: false,
190
                        hashtag: "#tarteaucitron",
191
                        cookieName: "tarteaucitron",
192
                        highPrivacy: true,
193
                        orientation: "middle",
194
                        bodyPosition: "bottom",
195
                        removeCredit: false,
196
                        showAlertSmall: false,
197
                        showDetailsOnClick: true,
198
                        showIcon: true,
199
                        iconPosition: "BottomRight",
200
                        cookieslist: false,
201
                        handleBrowserDNTRequest: false,
202
                        DenyAllCta: true,
203
                        AcceptAllCta: true,
204
                        moreInfoLink: true,
205
                        privacyUrl: "",
206
                        useExternalCss: false,
207
                        useExternalJs: false,
208
                        mandatory: true,
209
                        mandatoryCta: true,
210
                        closePopup: false,
211
                        groupServices: false,
212
                        serviceDefaultState: "wait",
213
                        googleConsentMode: true,
214
                        partnersList: false,
215
                        alwaysNeedConsent: false
216
                    },
217
                    params = tarteaucitron.parameters;
218
                tarteaucitronIsLoaded = true;
219
                if ((tarteaucitron.parameters.readmoreLink !== undefined && window.location.href == tarteaucitron.parameters.readmoreLink || window.location.href == tarteaucitron.parameters.privacyUrl) && tarteaucitron.parameters.orientation == "middle") {
220
                    tarteaucitron.parameters.orientation = "bottom"
221
                }
222
                if (typeof tarteaucitronCustomPremium !== "undefined") {
223
                    tarteaucitronCustomPremium()
224
                }
225
                if (params !== undefined) {
226
                    for (var k in defaults) {
227
                        if (!tarteaucitron.parameters.hasOwnProperty(k)) {
228
                            tarteaucitron.parameters[k] = defaults[k]
229
                        }
230
                    }
231
                }
232
                tarteaucitron.orientation = tarteaucitron.parameters.orientation;
233
                tarteaucitron.hashtag = tarteaucitron.parameters.hashtag;
234
                tarteaucitron.highPrivacy = tarteaucitron.parameters.highPrivacy;
235
                tarteaucitron.handleBrowserDNTRequest = tarteaucitron.parameters.handleBrowserDNTRequest;
236
                tarteaucitron.customCloserId = tarteaucitron.parameters.customCloserId;
237
                if (tarteaucitron.parameters.googleConsentMode === true) {
238
                    window.dataLayer = window.dataLayer || [];
239
                    window.tac_gtag = function tac_gtag() {
240
                        dataLayer.push(arguments)
241
                    };
242
                    window.tac_gtag("consent", "default", {
243
                        ad_storage: "denied",
244
                        analytics_storage: "denied",
245
                        ad_user_data: "denied",
246
                        ad_personalization: "denied",
247
                        wait_for_update: 800
248
                    });
249
                    document.addEventListener("googleads_added", function() {
250
                        if (tarteaucitron.added["gcmads"] === true) {
251
                            return
252
                        }
253
                        tarteaucitron.services.gcmads = {
254
                            key: "gcmads",
255
                            type: "ads",
256
                            name: "Google Ads (personalized ads)",
257
                            uri: "https://support.google.com/analytics/answer/9976101",
258
                            needConsent: true,
259
                            cookies: [],
260
                            js: function() {},
261
                            fallback: function() {}
262
                        };
263
                        tarteaucitron.job.push("gcmads");
264
                        var i, allowBtns = document.getElementsByClassName("tarteaucitronAllow"),
265
                            denyBtns = document.getElementsByClassName("tarteaucitronDeny");
266
                        for (i = 0; i < allowBtns.length; i++) {
267
                            tarteaucitron.addClickEventToElement(allowBtns[i], function() {
268
                                tarteaucitron.userInterface.respond(this, true)
269
                            })
270
                        }
271
                        for (i = 0; i < denyBtns.length; i++) {
272
                            tarteaucitron.addClickEventToElement(denyBtns[i], function() {
273
                                tarteaucitron.userInterface.respond(this, false)
274
                            })
275
                        }
276
                    });
277
                    document.addEventListener("gcmads_allowed", function() {
278
                        tarteaucitron.setConsent("googleads", true)
279
                    });
280
                    document.addEventListener("gcmads_loaded", function() {
281
                        window.tac_gtag("consent", "update", {
282
                            ad_user_data: "granted",
283
                            ad_personalization: "granted"
284
                        })
285
                    });
286
                    document.addEventListener("gcmads_allowed", function() {
287
                        window.tac_gtag("consent", "update", {
288
                            ad_user_data: "granted",
289
                            ad_personalization: "granted"
290
                        })
291
                    });
292
                    document.addEventListener("gcmads_disallowed", function() {
293
                        window.tac_gtag("consent", "update", {
294
                            ad_user_data: "denied",
295
                            ad_personalization: "denied"
296
                        })
297
                    });
298
                    document.addEventListener("googleads_loaded", function() {
299
                        window.tac_gtag("consent", "update", {
300
                            ad_storage: "granted"
301
                        })
302
                    });
303
                    document.addEventListener("googleads_allowed", function() {
304
                        window.tac_gtag("consent", "update", {
305
                            ad_storage: "granted"
306
                        })
307
                    });
308
                    document.addEventListener("googleads_disallowed", function() {
309
                        tarteaucitron.setConsent("gcmads", false);
310
                        window.tac_gtag("consent", "update", {
311
                            ad_storage: "denied"
312
                        })
313
                    });
314
                    document.addEventListener("gtag_loaded", function() {
315
                        window.tac_gtag("consent", "update", {
316
                            analytics_storage: "granted"
317
                        })
318
                    });
319
                    document.addEventListener("gtag_allowed", function() {
320
                        window.tac_gtag("consent", "update", {
321
                            analytics_storage: "granted"
322
                        })
323
                    });
324
                    document.addEventListener("gtag_disallowed", function() {
325
                        window.tac_gtag("consent", "update", {
326
                            analytics_storage: "denied"
327
                        })
328
                    });
329
                    window.addEventListener("tac.root_available", function() {
330
                        if (typeof tarteaucitron_block !== "undefined") {
331
                            tarteaucitron_block.unblock(/www\.googletagmanager\.com\/gtag\/js/);
332
                            tarteaucitron_block.unblock(/www\.googleadservices\.com\/pagead\/conversion/);
333
                            tarteaucitron_block.unblock(/AW-/);
334
                            tarteaucitron_block.unblock(/google-analytics\.com\/analytics\.js/);
335
                            tarteaucitron_block.unblock(/google-analytics\.com\/ga\.js/)
336
                        }
337
                    })
338
                }
339
                if (!tarteaucitron.parameters.useExternalCss) {
340
                    linkElement.rel = "stylesheet";
341
                    linkElement.type = "text/css";
342
                    linkElement.href = cdn + "css/tarteaucitron" + (useMinifiedJS ? ".min" : "") + ".css";
343
                    document.getElementsByTagName("head")[0].appendChild(linkElement)
344
                }
345
                tarteaucitron.addInternalScript(pathToLang, "", function() {
346
                    if (tarteaucitronCustomText !== "") {
347
                        tarteaucitron.lang = tarteaucitron.AddOrUpdate(tarteaucitron.lang, tarteaucitronCustomText)
348
                    }
349
                    tarteaucitron.addInternalScript(pathToServices, "", function() {
350
                        if (tarteaucitron.orientation === "middle") {
351
                            var customThemeMiddle = document.createElement("style"),
352
                                cssRuleMiddle = "div#tarteaucitronRoot.tarteaucitronBeforeVisible:before {content: '';position: fixed;width: 100%;height: 100%;background: white;top: 0;left: 0;z-index: 999;opacity: 0.5;}div#tarteaucitronAlertBig:before {content: '" + tarteaucitron.lang.middleBarHead + "';font-size: 35px;}body #tarteaucitronRoot div#tarteaucitronAlertBig {width: 60%;min-width: 285px;height: auto;margin: auto;left: 50%;top: 50%;transform: translate(-50%, -50%);box-shadow: 0 0 9000px #000;border-radius: 20px;padding: 35px 25px;}span#tarteaucitronDisclaimerAlert {padding: 0 30px;}#tarteaucitronRoot span#tarteaucitronDisclaimerAlert {margin: 10px 0 30px;display: block;text-align: center;font-size: 21px;}@media screen and (max-width: 900px) {div#tarteaucitronAlertBig button {margin: 0 auto 10px!important;display: block!important;}}";
353
                            customThemeMiddle.type = "text/css";
354
                            if (customThemeMiddle.styleSheet) {
355
                                customThemeMiddle.styleSheet.cssText = cssRuleMiddle
356
                            } else {
357
                                customThemeMiddle.appendChild(document.createTextNode(cssRuleMiddle))
358
                            }
359
                            document.getElementsByTagName("head")[0].appendChild(customThemeMiddle)
360
                        }
361
                        if (tarteaucitron.parameters.groupServices == true) {
362
                            tarteaucitron.parameters.showDetailsOnClick = true
363
                        }
364
                        if (tarteaucitron.orientation === "popup") {
365
                            var customThemePopup = document.createElement("style"),
366
                                cssRulePopup = "div#tarteaucitronAlertBig:before {content: '" + tarteaucitron.lang.middleBarHead + "';font-size: 22px;}body #tarteaucitronRoot div#tarteaucitronAlertBig {bottom: 0;top: auto!important;left: 8px!important;right: auto!important;transform: initial!important;border-radius: 5px 5px 0 0!important;max-width: 250px!important;width: calc(100% - 16px)!important;min-width: 0!important;padding: 25px 0;}span#tarteaucitronDisclaimerAlert {padding: 0 30px;font-size: 15px!important;}#tarteaucitronRoot span#tarteaucitronDisclaimerAlert {margin: 10px 0 30px;display: block;text-align: center;font-size: 21px;}div#tarteaucitronAlertBig button {margin: 0 auto 10px!important;display: block!important;width: calc(100% - 60px);box-sizing: border-box;}";
367
                            customThemePopup.type = "text/css";
368
                            if (customThemePopup.styleSheet) {
369
                                customThemePopup.styleSheet.cssText = cssRulePopup
370
                            } else {
371
                                customThemePopup.appendChild(document.createTextNode(cssRulePopup))
372
                            }
373
                            document.getElementsByTagName("head")[0].appendChild(customThemePopup)
374
                        }
375
                        var body = document.body,
376
                            div = document.createElement("div"),
377
                            html = "",
378
                            index, orientation = "Top",
379
                            modalAttrs = "",
380
                            cat = ["ads", "analytic", "api", "comment", "social", "support", "video", "other", "google"],
381
                            i;
382
                        cat = cat.sort(function(a, b) {
383
                            if (tarteaucitron.lang[a].title > tarteaucitron.lang[b].title) {
384
                                return 1
385
                            }
386
                            if (tarteaucitron.lang[a].title < tarteaucitron.lang[b].title) {
387
                                return -1
388
                            }
389
                            return 0
390
                        });
391
                        html += '<div role="heading" aria-level="1" id="tac_title" class="tac_visually-hidden">' + tarteaucitron.lang.title + "</div>";
392
                        html += '<div id="tarteaucitronPremium"></div>';
393
                        if (tarteaucitron.reloadThePage) {
394
                            html += '<button type="button" id="tarteaucitronBack" aria-label="' + tarteaucitron.lang.close + " (" + tarteaucitron.lang.reload + ')" title="' + tarteaucitron.lang.close + " (" + tarteaucitron.lang.reload + ')"></button>'
395
                        } else {
396
                            html += '<button type="button" id="tarteaucitronBack" aria-label="' + tarteaucitron.lang.close + '" title="' + tarteaucitron.lang.close + '"></button>'
397
                        }
398
                        html += '<div id="tarteaucitron" role="dialog" aria-modal="true" aria-labelledby="dialogTitle" tabindex="-1">';
399
                        if (tarteaucitron.reloadThePage) {
400
                            html += '   <button type="button" id="tarteaucitronClosePanel" aria-label="' + tarteaucitron.lang.close + " (" + tarteaucitron.lang.reload + ')" title="' + tarteaucitron.lang.close + " (" + tarteaucitron.lang.reload + ')">'
401
                        } else {
402
                            html += '   <button type="button" id="tarteaucitronClosePanel">'
403
                        }
404
                        html += "       " + tarteaucitron.lang.close;
405
                        html += "   </button>";
406
                        html += '   <div id="tarteaucitronServices">';
407
                        html += '      <div class="tarteaucitronLine tarteaucitronMainLine" id="tarteaucitronMainLineOffset">';
408
                        html += '         <span class="tarteaucitronH1" role="heading" aria-level="1" id="dialogTitle">' + tarteaucitron.lang.title + "</span>";
409
                        html += '         <div id="tarteaucitronInfo">';
410
                        html += "         " + tarteaucitron.lang.disclaimer;
411
                        if (tarteaucitron.parameters.privacyUrl !== "") {
412
                            html += "   <br/><br/>";
413
                            html += '   <button type="button" id="tarteaucitronPrivacyUrlDialog" role="link">';
414
                            html += "       " + tarteaucitron.lang.privacyUrl;
415
                            html += "   </button>"
416
                        }
417
                        html += "         </div>";
418
                        html += '         <div class="tarteaucitronName">';
419
                        html += '            <span class="tarteaucitronH2" role="heading" aria-level="2">' + tarteaucitron.lang.all + "</span>";
420
                        html += "         </div>";
421
                        html += '         <div class="tarteaucitronAsk" id="tarteaucitronScrollbarAdjust">';
422
                        html += '            <button type="button" id="tarteaucitronAllAllowed" class="tarteaucitronAllow">';
423
                        html += '               <span class="tarteaucitronCheck" aria-hidden="true"></span> ' + tarteaucitron.lang.allowAll;
424
                        html += "            </button> ";
425
                        html += '            <button type="button" id="tarteaucitronAllDenied" class="tarteaucitronDeny">';
426
                        html += '               <span class="tarteaucitronCross" aria-hidden="true"></span> ' + tarteaucitron.lang.denyAll;
427
                        html += "            </button>";
428
                        html += "         </div>";
429
                        html += "      </div>";
430
                        html += '      <div class="tarteaucitronBorder">';
431
                        html += '         <div class="clear"></div><ul>';
432
                        if (tarteaucitron.parameters.mandatory == true) {
433
                            html += '<li id="tarteaucitronServicesTitle_mandatory">';
434
                            html += '<div class="tarteaucitronTitle">';
435
                            if (tarteaucitron.parameters.showDetailsOnClick) {
436
                                html += '   <button type="button" tabindex="-1"><span class="tarteaucitronPlus" aria-hidden="true"></span> ' + tarteaucitron.lang.mandatoryTitle + "</button>"
437
                            } else {
438
                                html += '   <span class="asCatToggleBtn">' + tarteaucitron.lang.mandatoryTitle + "</span>"
439
                            }
440
                            html += "</div>";
441
                            html += '<ul id="tarteaucitronServices_mandatory">';
442
                            html += '<li class="tarteaucitronLine">';
443
                            html += '   <div class="tarteaucitronName">';
444
                            html += '       <span class="tarteaucitronH3" role="heading" aria-level="3">' + tarteaucitron.lang.mandatoryText + "</span>";
445
                            html += '       <span class="tarteaucitronListCookies" aria-hidden="true"></span><br/>';
446
                            html += "   </div>";
447
                            if (tarteaucitron.parameters.mandatoryCta == true) {
448
                                html += '   <div class="tarteaucitronAsk">';
449
                                html += '       <button type="button" class="tarteaucitronAllow" tabindex="-1" disabled>';
450
                                html += '           <span class="tarteaucitronCheck" aria-hidden="true"></span> ' + tarteaucitron.lang.allow;
451
                                html += "       </button> ";
452
                                html += '       <button type="button" class="tarteaucitronDeny" tabindex="-1">';
453
                                html += '           <span class="tarteaucitronCross" aria-hidden="true"></span> ' + tarteaucitron.lang.deny;
454
                                html += "       </button> ";
455
                                html += "   </div>"
456
                            }
457
                            html += "</li>";
458
                            html += "</ul></li>"
459
                        }
460
                        for (i = 0; i < cat.length; i += 1) {
461
                            html += '         <li id="tarteaucitronServicesTitle_' + cat[i] + '" class="tarteaucitronHidden">';
462
                            html += '            <div class="tarteaucitronTitle" role="heading" aria-level="2">';
463
                            if (tarteaucitron.parameters.showDetailsOnClick) {
464
                                html += '               <button type="button" class="catToggleBtn" aria-expanded="false" data-cat="tarteaucitronDetails' + cat[i] + '"><span class="tarteaucitronPlus" aria-hidden="true"></span> ' + tarteaucitron.lang[cat[i]].title + "</button>"
465
                            } else {
466
                                html += '               <span class="asCatToggleBtn" data-cat="tarteaucitronInlineDetails' + cat[i] + '">' + tarteaucitron.lang[cat[i]].title + "</span>"
467
                            }
468
                            html += "            </div>";
469
                            html += '            <div id="tarteaucitronDetails' + cat[i] + '" class="tarteaucitronDetails ' + (tarteaucitron.parameters.showDetailsOnClick ? "tarteaucitronInfoBox" : "tarteaucitronDetailsInline") + '">';
470
                            html += "               " + tarteaucitron.lang[cat[i]].details;
471
                            html += "            </div>";
472
                            html += '         <ul id="tarteaucitronServices_' + cat[i] + '"></ul></li>'
473
                        }
474
                        html += '             <li id="tarteaucitronNoServicesTitle" class="tarteaucitronLine">' + tarteaucitron.lang.noServices + "</li>";
475
                        html += "         </ul>";
476
                        html += '         <div class="tarteaucitronHidden tarteaucitron-spacer-20" id="tarteaucitronScrollbarChild"></div>';
477
                        if (tarteaucitron.parameters.removeCredit === false) {
478
                            html += '     <a class="tarteaucitronSelfLink" href="https://tarteaucitron.io/" rel="nofollow noreferrer noopener" target="_blank" title="tarteaucitron ' + tarteaucitron.lang.newWindow + '"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHcAAAAeCAYAAAAWwoEYAAADl0lEQVRoge1Y0W3bQAx9CjKARlC+9GVUmqDJBHEmiDyB6wkcTxBngtgTxJ0gzgQW4C/9aYOmE6g4lTQo+k6y3Rb94QOERNQd+cjj8XiGwWAwGAwGg8FgMBgMBoPB8F8RNRXe+whEKe7c36ZCAeCRxC9Rig2PUd8kPgAsoxSfQ3YAzAA8D/HwYYCb05kBKKO0teFkmbC1jlKsAnq/Abjn+QBqAIsoRS30ttwG/HNz1wH/XIxWTicLdvtW7xTAGEAMtP685CNsBTe2d/BLydfXAG57SEnMAST0zgYZSUCPk02bCvkJduIzuJzDLfPolbY+tLKmar+/8+IRePy4qdpE03qHuH8fipFb4N2+XdA3AJ/0vaQxt7s9FvkIS2XvtqnwM0rxpOQfbnE5G2LhTCmUO2fHIngOmcv+KG3HafDchB6ntwjYqenR2PqC7sOZ3E7FXHB0vqxoFyUyLh7OEH7LOGouvhhN3eIBeKXv0n5MsufdHqXcwYR5U2EbpV35lSspVPJmQj4TcgRK7jTg5IzmPUhhwM5a2WHUFCx+NgiDucmgh7idikLovHFlL0pxQ9xzX+IIP9Y6FrJsqhjlQpZRAkFVDCjZfcCHt6bqJDmuh5ylCWx0RVnk3oumaknqTH5sqrY0fBWyULaHUIgAgxb46MxV3DbieAhxOxUxjSuljig9lMQ/Bcfoi9BTEv9aLORSndVxYOH525sUDC6u2gWxcNzBNRxPanyh3ktKinOgy3WoxPbtUM0t6RkbQnzBnFPgi9GCOEubY9UffIryz9iKRe8s/FUfEWosJJGxagp85bpUO3VywQ46lOtAWfNxKwa4JXQ+628+bpxYGXXMzp5rXH401VEyXwIdowXFaKWSMFHvMTVmGnc+P3oXV2QOiBCfgex8QtcQCbcQE/H+eoHzrkFo1KM7zVO4jVVj5s6lRiWF7zyXyfRMc97J3tzj87mYqZ7E2YjzUct9GUi4tjHLR8dVkBLjQcuHFleWvQfRNEhFR7uX7pkctOwvZXsft7sAtyldEUIN2UTeLxnEfxKYswzdi88BdbZ8hifUoSMftQvP+muRwN6+Q3DeqqRExP9QmTtcheiHh0Ot1x2i2km1bP9pbufw5zZdyWsOrh7vQae5OZWbsMv30pi7cd/CKj3coPEVaCP4Zhx4eQWhOZ1Y9MTXGyP8/iGjEyfa1T4fO/4Lea9vBoPBYDAYDAaDwWAwGAwGwz8GgF8siXCCbrSRhgAAAABJRU5ErkJggg==" alt="tarteaucitron.io" /></a>'
479
                        }
480
                        html += "       </div>";
481
                        html += "   </div>";
482
                        html += "</div>";
483
                        if (tarteaucitron.parameters.orientation === "bottom") {
484
                            orientation = "Bottom"
485
                        }
486
                        if (tarteaucitron.parameters.orientation === "middle" || tarteaucitron.parameters.orientation === "popup") {
487
                            modalAttrs = ' role="dialog" aria-modal="true" aria-labelledby="tac_title"'
488
                        }
489
                        if (tarteaucitron.parameters.highPrivacy && !tarteaucitron.parameters.AcceptAllCta) {
490
                            html += '<div tabindex="-1" id="tarteaucitronAlertBig" class="tarteaucitronAlertBig' + orientation + '"' + modalAttrs + ">";
491
                            html += '   <span id="tarteaucitronDisclaimerAlert" role="paragraph">';
492
                            html += "       " + tarteaucitron.lang.alertBigPrivacy;
493
                            html += "   </span>";
494
                            html += '   <button type="button" id="tarteaucitronPersonalize" aria-label="' + tarteaucitron.lang.personalize + " " + tarteaucitron.lang.modalWindow + '" title="' + tarteaucitron.lang.personalize + " " + tarteaucitron.lang.modalWindow + '">';
495
                            html += "       " + tarteaucitron.lang.personalize;
496
                            html += "   </button>";
497
                            if (tarteaucitron.parameters.privacyUrl !== "") {
498
                                html += '   <button role="link" type="button" id="tarteaucitronPrivacyUrl">';
499
                                html += "       " + tarteaucitron.lang.privacyUrl;
500
                                html += "   </button>"
501
                            }
502
                            html += "</div>"
503
                        } else {
504
                            html += '<div tabindex="-1" id="tarteaucitronAlertBig" class="tarteaucitronAlertBig' + orientation + '"' + modalAttrs + ">";
505
                            html += '   <span id="tarteaucitronDisclaimerAlert" role="paragraph">';
506
                            if (tarteaucitron.parameters.highPrivacy) {
507
                                html += "       " + tarteaucitron.lang.alertBigPrivacy
508
                            } else {
509
                                html += "       " + tarteaucitron.lang.alertBigClick + " " + tarteaucitron.lang.alertBig
510
                            }
511
                            html += "   </span>";
512
                            html += '   <button type="button" class="tarteaucitronCTAButton tarteaucitronAllow" id="tarteaucitronPersonalize2">';
513
                            html += '       <span class="tarteaucitronCheck" aria-hidden="true"></span> ' + tarteaucitron.lang.acceptAll;
514
                            html += "   </button>";
515
                            if (tarteaucitron.parameters.DenyAllCta) {
516
                                if (tarteaucitron.reloadThePage) {
517
                                    html += '   <button type="button" class="tarteaucitronCTAButton tarteaucitronDeny" id="tarteaucitronAllDenied2" aria-label="' + tarteaucitron.lang.denyAll + " (" + tarteaucitron.lang.reload + ')" title="' + tarteaucitron.lang.denyAll + " (" + tarteaucitron.lang.reload + ')">'
518
                                } else {
519
                                    html += '   <button type="button" class="tarteaucitronCTAButton tarteaucitronDeny" id="tarteaucitronAllDenied2">'
520
                                }
521
                                html += '       <span class="tarteaucitronCross" aria-hidden="true"></span> ' + tarteaucitron.lang.denyAll;
522
                                html += "   </button>"
523
                            }
524
                            html += '   <button type="button" id="tarteaucitronCloseAlert" aria-label="' + tarteaucitron.lang.personalize + " " + tarteaucitron.lang.modalWindow + '" title="' + tarteaucitron.lang.personalize + " " + tarteaucitron.lang.modalWindow + '">';
525
                            html += "       " + tarteaucitron.lang.personalize;
526
                            html += "   </button>";
527
                            if (tarteaucitron.parameters.privacyUrl !== "") {
528
                                html += '   <button type="button" id="tarteaucitronPrivacyUrl" role="link">';
529
                                html += "       " + tarteaucitron.lang.privacyUrl;
530
                                html += "   </button>"
531
                            }
532
                            html += "</div>";
533
                            html += '<div id="tarteaucitronPercentage"></div>'
534
                        }
535
                        if (tarteaucitron.parameters.showIcon === true) {
536
                            html += '<div id="tarteaucitronIcon" class="tarteaucitronIcon' + tarteaucitron.parameters.iconPosition + '">';
537
                            html += '   <button type="button" id="tarteaucitronManager" aria-label="' + tarteaucitron.lang.icon + " " + tarteaucitron.lang.modalWindow + '" title="' + tarteaucitron.lang.icon + " " + tarteaucitron.lang.modalWindow + '">';
538
                            html += '       <img src="' + (tarteaucitron.parameters.iconSrc ? tarteaucitron.parameters.iconSrc : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAGA0lEQVRoge1a207bWBRdBtJwLYZhKDMVmlSK1LxNkPo+ZH6g8B6p5AuALwC+APoFoVLeoT8whPeRSt+CZKmZVu3AiIsRlEtCktGyjy8xzuXYhvahS0JJHJ/4rLP3XnuffcAPfGdQ7mM6jRLSAF4BxqsbewB2lRS2o35mpEQaJcwCyANIdLi1DGBNSWEzqmdHRqRRwjqAJclhtExOSUEP+/xIiDRKhhUWfL7ShTtBuJnqcw+/z4Ql0xNmMEwSSz4kuNIzSgpjSsqYJP/GeE185wYJroedRyiLNEpGLLzzrHSuk+83SgbxvOcyyRaDziWsRVZkSRDinpzPbwVGWIucuohsKynMS47fAQyls/BMSRmKJo3AFhG5wm2N1wF+Zs3zebbFfR0RxrXcJHQlgH+LMW616pR/WiIMEXfW3mtzXyeEGWsjKot8c4TOI98L+iKaR5PS6IUk88RLAO9F8UjrbYoYMOosNavpfmODIiwRXRR/G3ohaWVo1RU/c30jV8ab2mV8qVGzHWBOLyTLZiWs5Rolg/C3ySOi0tXP/k4aEwOwSBKPJs7Rp16ABJTe+p1xVX0It/owqqdDEMRoqd3RFxqDPh20Ig6VEPVC0i5RSCD+6wl6HlW7GksSlUMV11/GrUs5NasFLusDE9ELSVphXemtJwaT/8JyIRvxNNCfBmIiNdR04LII3DSrbe0yjqvyJF/ppptqVlt+MCLCEh/oOkPPP6N38Mb5cnQBGFsEqmXg5j3QMwoMzwGnr4HYbybBq13gZAOom/FO63zdf2qQArCsZrUN2TlJy69eSDKYV+6Q4MpP75ivHzPA53ngaBW4eGuSOt0A/lsGPmXMz0+3TFJcTfFbPfFbfnwlhON+iQhlWmA82CQ4ocQ7c6KcfL3DHuls0yT6Sx4YnLXJDCQOIRRv5yGIJBgP8Sdisj2qubpc5UGJmo+W49ifVmzL8HcpGhQPvZCUKiCliIhEN0tr2OCqHuSA8gwQ/92MkU7gxEmeVqGrTTgpxPXbUrtGWYus0I9thRIraagRQUIDf7Qn4yZhKRiFQIyhfMfUr3yblokVWSJ6k8xSnc7eNN/RjowfCYiFoDUFer1S3gW6JiJ8Nt30EMbEhU+vzSIztuRYjRLsR8IHLjlf7HZ+MrWWEXxNmbvapt4jGSqZRYSkGUetSNTPzHsui5YMQ2ajJUNks6mw4wT54Ok2ShnzzIPCUGshzawCRKy5FqvrTZe0RWzQGvw79m67XZjKmxJrLsICjtZa55gxXy+6F4sYsEtxTqhXdRTLC8ulSDaWoCLsolfN+8YUhOsJV709H7Cudr0LlVEtzqBcN+shEyThdR941OnAbF8pirKJqXyupTRTtQSReiVmXW1j7oBErB0d9xM2WEd5J9ZKYtuR4WKwwBSoORbpGrJ5ZI9lt71irJmGX1px0JYE26uNErawr2zfIcP4OHEKXm66PA3wjpCNEfpJunI4muifPjKvsFCkGjExTq63yxMJsZNMYF/J4HmDC5A3Yq36jy0ClePHVhwuu/b1HSFlEfHD5ZtD1bEK44Qu1mWys6tbWmZyPWckzlPTGiRw/XHCuk+q4Rek+mVrVL/UppwrdDEGNV2kpyuhccgc5Oxm9vWnn+19vJrVpLor0kTUrGacMplb1CfOFyTD4o9uNrHqr2Z+ZMSp1c2XcVSORnh9Q81q3k599ETgkNnjg0nGzi10K7rX+bZpHbrblPcY5A4Zxk2xcjzCvTpd9027Aa0QtouyyrKFRR6D/04DwkFGvHPXM3Qda/Jb4nPgI7hQLVM1q5HIBt2MzQNa57Z1DiiLAGa5Mi+O4Sz3Mpp6laPHO6InII3ITnX1QtI+EOX+m9ZxleOZ/j9PiuKoLi3aqXPuEoSye/Vhkm+LalbLtHhMS0R6zu7aZ3vP2jOjL7QVv4McxhcDnZIelAQibGIbULOapf3PuE1Vs9qeaOTdkVKr00gCQiw4NlBzDvf1Lxx+uP5r3Dgv5KQZRzWn+GRwz8jmDS8itUg7iB6vLuJCF5Uty4A9mVKkFR6MiJDachST/oHvHgD+B4SoUIitpF05AAAAAElFTkSuQmCC") + '" alt="' + tarteaucitron.lang.icon + " " + tarteaucitron.lang.modalWindow + '" title="' + tarteaucitron.lang.icon + " " + tarteaucitron.lang.modalWindow + '">';
539
                            html += "   </button>";
540
                            html += "</div>"
541
                        }
542
                        if (tarteaucitron.parameters.showAlertSmall === true) {
543
                            html += '<div id="tarteaucitronAlertSmall" class="tarteaucitronAlertSmall' + orientation + '">';
544
                            html += '   <button type="button" id="tarteaucitronManager" aria-label="' + tarteaucitron.lang.alertSmall + " " + tarteaucitron.lang.modalWindow + '" title="' + tarteaucitron.lang.alertSmall + " " + tarteaucitron.lang.modalWindow + '">';
545
                            html += "       " + tarteaucitron.lang.alertSmall;
546
                            html += '       <span id="tarteaucitronDot">';
547
                            html += '           <span id="tarteaucitronDotGreen"></span>';
548
                            html += '           <span id="tarteaucitronDotYellow"></span>';
549
                            html += '           <span id="tarteaucitronDotRed"></span>';
550
                            html += "       </span>";
551
                            if (tarteaucitron.parameters.cookieslist === true) {
552
                                html += "   </button>\x3c!-- @whitespace";
553
                                html += '   --\x3e<button type="button" id="tarteaucitronCookiesNumber" aria-expanded="false" aria-controls="tarteaucitronCookiesListContainer">0</button>';
554
                                html += '   <div id="tarteaucitronCookiesListContainer">';
555
                                if (tarteaucitron.reloadThePage) {
556
                                    html += '       <button type="button" id="tarteaucitronClosePanelCookie" aria-label="' + tarteaucitron.lang.close + " (" + tarteaucitron.lang.reload + ')" title="' + tarteaucitron.lang.close + " (" + tarteaucitron.lang.reload + ')">'
557
                                } else {
558
                                    html += '       <button type="button" id="tarteaucitronClosePanelCookie">'
559
                                }
560
                                html += "           " + tarteaucitron.lang.close;
561
                                html += "       </button>";
562
                                html += '       <div class="tarteaucitronCookiesListMain" id="tarteaucitronCookiesTitle">';
563
                                html += '            <span class="tarteaucitronH2" role="heading" aria-level="2" id="tarteaucitronCookiesNumberBis">0 cookie</span>';
564
                                html += "       </div>";
565
                                html += '       <div id="tarteaucitronCookiesList"></div>';
566
                                html += "    </div>"
567
                            } else {
568
                                html += "   </div>"
569
                            }
570
                            html += "</div>"
571
                        }
572
                        tarteaucitron.addInternalScript(tarteaucitron.cdn + "advertising" + (useMinifiedJS ? ".min" : "") + ".js", "", function() {
573
                            if (tarteaucitronNoAdBlocker === true || tarteaucitron.parameters.adblocker === false) {
574
                                div.id = "tarteaucitronRoot";
575
                                if (tarteaucitron.parameters.bodyPosition === "top") {
576
                                    var bodyFirstChild = body.firstChild;
577
                                    body.insertBefore(div, bodyFirstChild)
578
                                } else {
579
                                    body.appendChild(div, body)
580
                                }
581
                                div.setAttribute("data-nosnippet", "true");
582
                                div.setAttribute("lang", language);
583
                                div.setAttribute("role", "region");
584
                                div.setAttribute("aria-labelledby", "tac_title");
585
                                div.innerHTML = html;
586
                                var tacRootAvailableEvent;
587
                                if (typeof Event === "function") {
588
                                    tacRootAvailableEvent = new Event("tac.root_available")
589
                                } else if (typeof document.createEvent === "function") {
590
                                    tacRootAvailableEvent = document.createEvent("Event");
591
                                    tacRootAvailableEvent.initEvent("tac.root_available", true, true)
592
                                }
593
                                if (typeof window.dispatchEvent === "function") {
594
                                    window.dispatchEvent(tacRootAvailableEvent)
595
                                }
596
                                if (tarteaucitron.job !== undefined) {
597
                                    tarteaucitron.job = tarteaucitron.cleanArray(tarteaucitron.job);
598
                                    for (index = 0; index < tarteaucitron.job.length; index += 1) {
599
                                        tarteaucitron.addService(tarteaucitron.job[index])
600
                                    }
601
                                } else {
602
                                    tarteaucitron.job = []
603
                                }
604
                                if (tarteaucitron.job.length === 0) {
605
                                    tarteaucitron.userInterface.closeAlert()
606
                                }
607
                                tarteaucitron.isAjax = true;
608
                                tarteaucitron.job.push = function(id) {
609
                                    if (typeof tarteaucitron.job.indexOf === "undefined") {
610
                                        tarteaucitron.job.indexOf = function(obj, start) {
611
                                            var i, j = this.length;
612
                                            for (i = start || 0; i < j; i += 1) {
613
                                                if (this[i] === obj) {
614
                                                    return i
615
                                                }
616
                                            }
617
                                            return -1
618
                                        }
619
                                    }
620
                                    if (tarteaucitron.job.indexOf(id) === -1) {
621
                                        Array.prototype.push.call(this, id)
622
                                    }
623
                                    tarteaucitron.launch[id] = false;
624
                                    tarteaucitron.addService(id)
625
                                };
626
                                if (document.location.hash === tarteaucitron.hashtag && tarteaucitron.hashtag !== "") {
627
                                    tarteaucitron.userInterface.openPanel()
628
                                }
629
                                tarteaucitron.cookie.number();
630
                                setInterval(tarteaucitron.cookie.number, 6e4)
631
                            }
632
                        }, tarteaucitron.parameters.adblocker);
633
                        if (tarteaucitron.parameters.adblocker === true) {
634
                            setTimeout(function() {
635
                                if (tarteaucitronNoAdBlocker === false) {
636
                                    html = '<div id="tarteaucitronAlertBig" class="tarteaucitronAlertBig' + orientation + ' tarteaucitron-display-block" role="alert" aria-live="polite">';
637
                                    html += '   <p id="tarteaucitronDisclaimerAlert">';
638
                                    html += "       " + tarteaucitron.lang.adblock + "<br/>";
639
                                    html += "       <strong>" + tarteaucitron.lang.adblock_call + "</strong>";
640
                                    html += "   </p>";
641
                                    html += '   <button type="button" class="tarteaucitronCTAButton" id="tarteaucitronCTAButton">';
642
                                    html += "       " + tarteaucitron.lang.reload;
643
                                    html += "   </button>";
644
                                    html += "</div>";
645
                                    html += '<div role="heading" aria-level="1" id="tac_title" class="tac_visually-hidden">' + tarteaucitron.lang.title + "</div>";
646
                                    html += '<div id="tarteaucitronPremium"></div>';
647
                                    div.id = "tarteaucitronRoot";
648
                                    if (tarteaucitron.parameters.bodyPosition === "top") {
649
                                        var bodyFirstChild = body.firstChild;
650
                                        body.insertBefore(div, bodyFirstChild)
651
                                    } else {
652
                                        body.appendChild(div, body)
653
                                    }
654
                                    div.setAttribute("data-nosnippet", "true");
655
                                    div.setAttribute("lang", language);
656
                                    div.setAttribute("role", "region");
657
                                    div.setAttribute("aria-labelledby", "tac_title");
658
                                    div.innerHTML = html
659
                                }
660
                            }, 1500)
661
                        }
662
                        if (tarteaucitron.parameters.closePopup === true) {
663
                            setTimeout(function() {
664
                                var closeElement = document.getElementById("tarteaucitronAlertBig"),
665
                                    closeButton = document.createElement("button");
666
                                if (closeElement) {
667
                                    closeButton.innerHTML = '<span aria-hidden="true">X</span><span class="tac_visually-hidden">' + tarteaucitron.lang.closeBanner + "</span>";
668
                                    closeButton.setAttribute("id", "tarteaucitronCloseCross");
669
                                    closeElement.insertAdjacentElement("beforeend", closeButton)
670
                                }
671
                            }, 100)
672
                        }
673
                        if (tarteaucitron.parameters.groupServices === true) {
674
                            var tac_group_style = document.createElement("style");
675
                            tac_group_style.innerHTML = ".tarteaucitronTitle{display:none}";
676
                            document.head.appendChild(tac_group_style);
677
                            var cats = document.querySelectorAll('[id^="tarteaucitronServicesTitle_"]');
678
                            Array.prototype.forEach.call(cats, function(item) {
679
                                var cat = item.getAttribute("id").replace(/^(tarteaucitronServicesTitle_)/, "");
680
                                if (cat !== "mandatory") {
681
                                    var html = "";
682
                                    html += '<li  class="tarteaucitronLine">';
683
                                    html += '   <div class="tarteaucitronName">';
684
                                    html += '       <span class="tarteaucitronH3" role="heading" aria-level="2">' + tarteaucitron.lang[cat].title + "</span>";
685
                                    html += "       <span>" + tarteaucitron.lang[cat].details + "</span>";
686
                                    html += '   <button type="button" aria-expanded="false" class="tarteaucitron-toggle-group" id="tarteaucitron-toggle-group-' + cat + '">' + tarteaucitron.lang.alertSmall + " (" + document.getElementById("tarteaucitronServices_" + cat).childElementCount + ")</button>";
687
                                    html += "   </div>";
688
                                    html += '   <div class="tarteaucitronAsk" id="tarteaucitron-group-' + cat + '">';
689
                                    html += '       <button type="button" aria-label="' + tarteaucitron.lang.allow + " " + tarteaucitron.lang[cat].title + '" class="tarteaucitronAllow" id="tarteaucitron-accept-group-' + cat + '">';
690
                                    html += '           <span class="tarteaucitronCheck" aria-hidden="true"></span> ' + tarteaucitron.lang.allow;
691
                                    html += "       </button> ";
692
                                    html += '       <button type="button" aria-label="' + tarteaucitron.lang.deny + " " + tarteaucitron.lang[cat].title + '" class="tarteaucitronDeny" id="tarteaucitron-reject-group-' + cat + '">';
693
                                    html += '           <span class="tarteaucitronCross" aria-hidden="true"></span> ' + tarteaucitron.lang.deny;
694
                                    html += "       </button>";
695
                                    html += "   </div>";
696
                                    html += "</li>";
697
                                    var ul = document.createElement("ul");
698
                                    ul.innerHTML = html;
699
                                    item.insertBefore(ul, item.querySelector("#tarteaucitronServices_" + cat + ""));
700
                                    document.querySelector("#tarteaucitronServices_" + cat).style.display = "none";
701
                                    tarteaucitron.addClickEventToId("tarteaucitron-toggle-group-" + cat, function() {
702
                                        tarteaucitron.userInterface.toggle("tarteaucitronServices_" + cat);
703
                                        if (document.getElementById("tarteaucitronServices_" + cat).style.display == "block") {
704
                                            tarteaucitron.userInterface.addClass("tarteaucitronServicesTitle_" + cat, "tarteaucitronIsExpanded");
705
                                            document.getElementById("tarteaucitron-toggle-group-" + cat).setAttribute("aria-expanded", "true")
706
                                        } else {
707
                                            tarteaucitron.userInterface.removeClass("tarteaucitronServicesTitle_" + cat, "tarteaucitronIsExpanded");
708
                                            document.getElementById("tarteaucitron-toggle-group-" + cat).setAttribute("aria-expanded", "false")
709
                                        }
710
                                    });
711
                                    tarteaucitron.addClickEventToId("tarteaucitron-accept-group-" + cat, function() {
712
                                        tarteaucitron.userInterface.respondAll(true, cat)
713
                                    });
714
                                    tarteaucitron.addClickEventToId("tarteaucitron-reject-group-" + cat, function() {
715
                                        tarteaucitron.userInterface.respondAll(false, cat)
716
                                    })
717
                                }
718
                            })
719
                        }
720
                        if (tarteaucitron.parameters.partnersList === true && (tarteaucitron.parameters.orientation === "middle" || tarteaucitron.parameters.orientation === "popup")) {
721
                            setTimeout(function() {
722
                                var liPartners = "";
723
                                var tarteaucitronPartnersCat = [];
724
                                tarteaucitron.job.forEach(function(id) {
725
                                    if (tarteaucitronPartnersCat[tarteaucitron.services[id].type] === undefined) {
726
                                        tarteaucitronPartnersCat[tarteaucitron.services[id].type] = true;
727
                                        liPartners += "<li>" + tarteaucitron.lang[tarteaucitron.services[id].type].title + "</li>"
728
                                    }
729
                                });
730
                                var tacPartnersInfoParent = document.getElementById("tarteaucitronDisclaimerAlert");
731
                                if (tacPartnersInfoParent !== null) {
732
                                    tacPartnersInfoParent.insertAdjacentHTML("beforeend", '<div class="tarteaucitronPartnersList"><b>' + tarteaucitron.lang.ourpartners + " (" + tarteaucitron.job.length + ")</b> <ul>" + liPartners + "</ul></div>")
733
                                }
734
                            }, 100)
735
                        }
736
                        setTimeout(function() {
737
                            var tacSaveButtonParent = document.getElementById("tarteaucitronServices");
738
                            if (tacSaveButtonParent !== null) {
739
                                tacSaveButtonParent.insertAdjacentHTML("beforeend", '<div id="tarteaucitronSave"><button class="tarteaucitronAllow" id="tarteaucitronSaveButton">' + tarteaucitron.lang.save + "</button></div>")
740
                            }
741
                        }, 100);
742
                        tarteaucitron.userInterface.color("", true);
743
                        setTimeout(function() {
744
                            tarteaucitron.addClickEventToId("tarteaucitronCloseCross", function() {
745
                                tarteaucitron.userInterface.closeAlert()
746
                            });
747
                            tarteaucitron.addClickEventToId("tarteaucitronPersonalize", function() {
748
                                tarteaucitron.userInterface.openPanel()
749
                            });
750
                            tarteaucitron.addClickEventToId("tarteaucitronPersonalize2", function() {
751
                                tarteaucitron.userInterface.respondAll(true)
752
                            });
753
                            tarteaucitron.addClickEventToId("tarteaucitronManager", function() {
754
                                tarteaucitron.userInterface.openPanel()
755
                            });
756
                            tarteaucitron.addClickEventToId("tarteaucitronBack", function() {
757
                                tarteaucitron.userInterface.closePanel()
758
                            });
759
                            tarteaucitron.addClickEventToId("tarteaucitronClosePanel", function() {
760
                                tarteaucitron.userInterface.closePanel()
761
                            });
762
                            tarteaucitron.addClickEventToId("tarteaucitronClosePanelCookie", function() {
763
                                tarteaucitron.userInterface.closePanel()
764
                            });
765
                            tarteaucitron.addClickEventToId("tarteaucitronPrivacyUrl", function() {
766
                                document.location = tarteaucitron.parameters.privacyUrl
767
                            });
768
                            tarteaucitron.addClickEventToId("tarteaucitronPrivacyUrlDialog", function() {
769
                                document.location = tarteaucitron.parameters.privacyUrl
770
                            });
771
                            tarteaucitron.addClickEventToId("tarteaucitronCookiesNumber", function() {
772
                                tarteaucitron.userInterface.toggleCookiesList()
773
                            });
774
                            tarteaucitron.addClickEventToId("tarteaucitronAllAllowed", function() {
775
                                tarteaucitron.userInterface.respondAll(true)
776
                            });
777
                            tarteaucitron.addClickEventToId("tarteaucitronAllDenied", function() {
778
                                tarteaucitron.userInterface.respondAll(false)
779
                            });
780
                            tarteaucitron.addClickEventToId("tarteaucitronAllDenied2", function() {
781
                                tarteaucitron.userInterface.respondAll(false, "", true);
782
                                if (tarteaucitron.reloadThePage === true) {
783
                                    window.location.reload()
784
                                }
785
                            });
786
                            tarteaucitron.addClickEventToId("tarteaucitronCloseAlert", function() {
787
                                tarteaucitron.userInterface.openPanel()
788
                            });
789
                            tarteaucitron.addClickEventToId("tarteaucitronCTAButton", function() {
790
                                location.reload()
791
                            });
792
                            tarteaucitron.addClickEventToId("tarteaucitronSaveButton", function() {
793
                                var timeoutSaveButton = 0;
794
                                tarteaucitron.job.forEach(function(id) {
795
                                    if (tarteaucitron.state[id] !== true && tarteaucitron.state[id] !== false) {
796
                                        timeoutSaveButton = 500;
797
                                        tarteaucitron.setConsent(id, false)
798
                                    }
799
                                });
800
                                setTimeout(tarteaucitron.userInterface.closePanel, timeoutSaveButton)
801
                            });
802
                            var toggleBtns = document.getElementsByClassName("catToggleBtn"),
803
                                i;
804
                            for (i = 0; i < toggleBtns.length; i++) {
805
                                toggleBtns[i].dataset.index = i;
806
                                tarteaucitron.addClickEventToElement(toggleBtns[i], function() {
807
                                    if (!tarteaucitron.parameters.showDetailsOnClick) return false;
808
                                    tarteaucitron.userInterface.toggle("tarteaucitronDetails" + cat[this.dataset.index], "tarteaucitronInfoBox");
809
                                    if (document.getElementById("tarteaucitronDetails" + cat[this.dataset.index]).style.display === "block") {
810
                                        this.setAttribute("aria-expanded", "true")
811
                                    } else {
812
                                        this.setAttribute("aria-expanded", "false")
813
                                    }
814
                                    return false
815
                                })
816
                            }
817
                            var allowBtnsInSite = document.querySelectorAll(".tac_activate .tarteaucitronAllow");
818
                            for (i = 0; i < allowBtnsInSite.length; i++) {
819
                                tarteaucitron.addClickEventToElement(allowBtnsInSite[i], function() {
820
                                    if (this.closest(".tac_activate") !== null && this.closest(".tac_activate").parentNode !== null) {
821
                                        this.closest(".tac_activate").parentNode.setAttribute("tabindex", "-1");
822
                                        this.closest(".tac_activate").parentNode.focus()
823
                                    }
824
                                })
825
                            }
826
                            var allowBtns = document.getElementsByClassName("tarteaucitronAllow");
827
                            for (i = 0; i < allowBtns.length; i++) {
828
                                tarteaucitron.addClickEventToElement(allowBtns[i], function() {
829
                                    tarteaucitron.userInterface.respond(this, true)
830
                                })
831
                            }
832
                            var denyBtns = document.getElementsByClassName("tarteaucitronDeny");
833
                            for (i = 0; i < denyBtns.length; i++) {
834
                                tarteaucitron.addClickEventToElement(denyBtns[i], function() {
835
                                    tarteaucitron.userInterface.respond(this, false)
836
                                })
837
                            }
838
                            if (tarteaucitron.events.load) {
839
                                tarteaucitron.events.load()
840
                            }
841
                        }, 500)
842
                    })
843
                })
844
            },
845
            addService: function(serviceId) {
846
                "use strict";
847
                var html = "",
848
                    s = tarteaucitron.services,
849
                    service = s[serviceId];
850
                if (tarteaucitron.parameters.alwaysNeedConsent === true) {
851
                    service.needConsent = true
852
                }
853
                var cookie = tarteaucitron.cookie.read(),
854
                    hostname = document.location.hostname,
855
                    hostRef = document.referrer.split("/")[2],
856
                    isNavigating = hostRef === hostname && window.location.href !== tarteaucitron.parameters.privacyUrl,
857
                    isAutostart = !service.needConsent,
858
                    isWaiting = cookie.indexOf(service.key + "=wait") >= 0,
859
                    isDenied = cookie.indexOf(service.key + "=false") >= 0,
860
                    isAllowed = cookie.indexOf(service.key + "=true") >= 0 || !service.needConsent && cookie.indexOf(service.key + "=false") < 0,
861
                    isResponded = cookie.indexOf(service.key + "=false") >= 0 || cookie.indexOf(service.key + "=true") >= 0,
862
                    isDNTRequested = navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1" || window.doNotTrack === "1",
863
                    currentStatus = isAllowed ? tarteaucitron.lang.allowed : tarteaucitron.lang.disallowed,
864
                    state = undefined !== service.defaultState ? service.defaultState : undefined !== tarteaucitron.parameters.serviceDefaultState ? tarteaucitron.parameters.serviceDefaultState : "wait";
865
                if (tarteaucitron.added[service.key] !== true) {
866
                    tarteaucitron.added[service.key] = true;
867
                    html += '<li id="' + service.key + 'Line" class="tarteaucitronLine">';
868
                    html += '   <div class="tarteaucitronName">';
869
                    html += '       <span class="tarteaucitronH3" role="heading" aria-level="3">' + service.name + "</span>";
870
                    html += '       <div class="tarteaucitronStatusInfo">';
871
                    html += '          <span class="tacCurrentStatus" id="tacCurrentStatus' + service.key + '">' + currentStatus + "</span>";
872
                    html += '          <span class="tarteaucitronReadmoreSeparator"> - </span>';
873
                    html += '          <span id="tacCL' + service.key + '" class="tarteaucitronListCookies"></span>';
874
                    html += "       </div>";
875
                    if (tarteaucitron.parameters.moreInfoLink == true) {
876
                        var link = "https://tarteaucitron.io/service/" + service.key + "/";
877
                        if (service.readmoreLink !== undefined && service.readmoreLink !== "") {
878
                            link = service.readmoreLink
879
                        }
880
                        if (tarteaucitron.parameters.readmoreLink !== undefined && tarteaucitron.parameters.readmoreLink !== "") {
881
                            link = tarteaucitron.parameters.readmoreLink
882
                        }
883
                        html += '       <a href="' + link + '" target="_blank" rel="noreferrer noopener nofollow" title="' + tarteaucitron.lang.more + " : " + tarteaucitron.lang.cookieDetail + " " + service.name + " " + tarteaucitron.lang.ourSite + " " + tarteaucitron.lang.newWindow + '" class="tarteaucitronReadmoreInfo">' + tarteaucitron.lang.more + "</a>";
884
                        html += '       <span class="tarteaucitronReadmoreSeparator"> - </span>';
885
                        html += '       <a href="' + service.uri + '" target="_blank" rel="noreferrer noopener" title="' + tarteaucitron.lang.source + " " + service.name + " " + tarteaucitron.lang.newWindow + '" class="tarteaucitronReadmoreOfficial">' + tarteaucitron.lang.source + "</a>"
886
                    }
887
                    html += "   </div>";
888
                    html += '   <div class="tarteaucitronAsk">';
889
                    html += '       <button type="button" aria-label="' + tarteaucitron.lang.allow + " " + service.name + '" id="' + service.key + 'Allowed" class="tarteaucitronAllow">';
890
                    html += '           <span class="tarteaucitronCheck" aria-hidden="true"></span> ' + tarteaucitron.lang.allow;
891
                    html += "       </button> ";
892
                    html += '       <button type="button" aria-label="' + tarteaucitron.lang.deny + " " + service.name + '" id="' + service.key + 'Denied" class="tarteaucitronDeny">';
893
                    html += '           <span class="tarteaucitronCross" aria-hidden="true"></span> ' + tarteaucitron.lang.deny;
894
                    html += "       </button>";
895
                    html += "   </div>";
896
                    html += "</li>";
897
                    tarteaucitron.userInterface.css("tarteaucitronServicesTitle_" + service.type, "display", "block");
898
                    if (document.getElementById("tarteaucitronServices_" + service.type) !== null) {
899
                        document.getElementById("tarteaucitronServices_" + service.type).innerHTML += html
900
                    }
901
                    tarteaucitron.userInterface.css("tarteaucitronNoServicesTitle", "display", "none");
902
                    tarteaucitron.userInterface.order(service.type);
903
                    tarteaucitron.addClickEventToId(service.key + "Allowed", function() {
904
                        tarteaucitron.userInterface.respond(this, true)
905
                    });
906
                    tarteaucitron.addClickEventToId(service.key + "Denied", function() {
907
                        tarteaucitron.userInterface.respond(this, false)
908
                    })
909
                }
910
                tarteaucitron.pro("!" + service.key + "=" + isAllowed);
911
                if (isResponded === false && tarteaucitron.user.bypass === true) {
912
                    isAllowed = true;
913
                    tarteaucitron.cookie.create(service.key, true)
914
                }
915
                if (!isResponded && (isAutostart || isNavigating && isWaiting) && !tarteaucitron.highPrivacy || isAllowed) {
916
                    if (!isAllowed || !service.needConsent && cookie.indexOf(service.key + "=false") < 0) {
917
                        tarteaucitron.cookie.create(service.key, true)
918
                    }
919
                    if (tarteaucitron.launch[service.key] !== true) {
920
                        tarteaucitron.launch[service.key] = true;
921
                        if (typeof tarteaucitronMagic === "undefined" || tarteaucitronMagic.indexOf("_" + service.key + "_") < 0) {
922
                            service.js()
923
                        }
924
                        tarteaucitron.sendEvent(service.key + "_loaded")
925
                    }
926
                    tarteaucitron.state[service.key] = true;
927
                    tarteaucitron.userInterface.color(service.key, true)
928
                } else if (isDenied) {
929
                    if (typeof service.fallback === "function") {
930
                        if (typeof tarteaucitronMagic === "undefined" || tarteaucitronMagic.indexOf("_" + service.key + "_") < 0) {
931
                            service.fallback()
932
                        }
933
                    }
934
                    tarteaucitron.state[service.key] = false;
935
                    tarteaucitron.userInterface.color(service.key, false)
936
                } else if (!isResponded && isDNTRequested && tarteaucitron.handleBrowserDNTRequest) {
937
                    tarteaucitron.cookie.create(service.key, "false");
938
                    if (typeof service.fallback === "function") {
939
                        if (typeof tarteaucitronMagic === "undefined" || tarteaucitronMagic.indexOf("_" + service.key + "_") < 0) {
940
                            service.fallback()
941
                        }
942
                    }
943
                    tarteaucitron.state[service.key] = false;
944
                    tarteaucitron.userInterface.color(service.key, false)
945
                } else if (!isResponded) {
946
                    tarteaucitron.cookie.create(service.key, state);
947
                    if (typeof tarteaucitronMagic === "undefined" || tarteaucitronMagic.indexOf("_" + service.key + "_") < 0) {
948
                        if (true === state && typeof service.js === "function") {
949
                            service.js();
950
                            tarteaucitron.sendEvent(service.key + "_loaded")
951
                        } else if (typeof service.fallback === "function") {
952
                            service.fallback()
953
                        }
954
                    }
955
                    tarteaucitron.userInterface.color(service.key, state);
956
                    if ("wait" === state) {
957
                        tarteaucitron.userInterface.openAlert()
958
                    }
959
                }
960
                tarteaucitron.cookie.checkCount(service.key);
961
                tarteaucitron.sendEvent(service.key + "_added")
962
            },
963
            sendEvent: function(event_key) {
964
                if (event_key !== undefined) {
965
                    var send_event_item;
966
                    if (typeof Event === "function") {
967
                        send_event_item = new Event(event_key)
968
                    } else if (typeof document.createEvent === "function") {
969
                        send_event_item = document.createEvent("Event");
970
                        send_event_item.initEvent(event_key, true, true)
971
                    }
972
                    document.dispatchEvent(send_event_item)
973
                }
974
            },
975
            cleanArray: function cleanArray(arr) {
976
                "use strict";
977
                var i, len = arr.length,
978
                    out = [],
979
                    obj = {},
980
                    s = tarteaucitron.services;
981
                for (i = 0; i < len; i += 1) {
982
                    if (!obj[arr[i]]) {
983
                        obj[arr[i]] = {};
984
                        if (tarteaucitron.services[arr[i]] !== undefined) {
985
                            out.push(arr[i])
986
                        }
987
                    }
988
                }
989
                out = out.sort(function(a, b) {
990
                    if (s[a].type + s[a].key > s[b].type + s[b].key) {
991
                        return 1
992
                    }
993
                    if (s[a].type + s[a].key < s[b].type + s[b].key) {
994
                        return -1
995
                    }
996
                    return 0
997
                });
998
                return out
999
            },
1000
            setConsent: function(id, status) {
1001
                if (status === true) {
1002
                    tarteaucitron.userInterface.respond(document.getElementById(id + "Allowed"), true)
1003
                } else if (status === false) {
1004
                    tarteaucitron.userInterface.respond(document.getElementById(id + "Denied"), false)
1005
                }
1006
            },
1007
            userInterface: {
1008
                css: function(id, property, value) {
1009
                    "use strict";
1010
                    if (document.getElementById(id) !== null) {
1011
                        if (property == "display" && value == "none" && (id == "tarteaucitron" || id == "tarteaucitronBack" || id == "tarteaucitronAlertBig")) {
1012
                            document.getElementById(id).style["opacity"] = "0";
1013
                            document.getElementById(id).style[property] = value
1014
                        } else {
1015
                            document.getElementById(id).style[property] = value;
1016
                            if (property == "display" && value == "block" && (id == "tarteaucitron" || id == "tarteaucitronAlertBig")) {
1017
                                document.getElementById(id).style["opacity"] = "1"
1018
                            }
1019
                            if (property == "display" && value == "block" && id == "tarteaucitronBack") {
1020
                                document.getElementById(id).style["opacity"] = "0.7"
1021
                            }
1022
                            if (property == "display" && value == "block" && id == "tarteaucitronAlertBig" && (tarteaucitron.parameters.orientation == "middle" || tarteaucitron.parameters.orientation == "popup")) {
1023
                                tarteaucitron.userInterface.focusTrap("tarteaucitronAlertBig")
1024
                            }
1025
                        }
1026
                    }
1027
                },
1028
                addClass: function(id, className) {
1029
                    "use strict";
1030
                    if (document.getElementById(id) !== null && document.getElementById(id).classList !== undefined) {
1031
                        document.getElementById(id).classList.add(className)
1032
                    }
1033
                },
1034
                removeClass: function(id, className) {
1035
                    "use strict";
1036
                    if (document.getElementById(id) !== null && document.getElementById(id).classList !== undefined) {
1037
                        document.getElementById(id).classList.remove(className)
1038
                    }
1039
                },
1040
                respondAll: function(status, type, allowSafeAnalytics) {
1041
                    "use strict";
1042
                    var s = tarteaucitron.services,
1043
                        service, key, index = 0;
1044
                    for (index = 0; index < tarteaucitron.job.length; index += 1) {
1045
                        if (typeof type !== "undefined" && type !== "" && s[tarteaucitron.job[index]].type !== type) {
1046
                            continue
1047
                        }
1048
                        if (allowSafeAnalytics && typeof s[tarteaucitron.job[index]].safeanalytic !== "undefined" && s[tarteaucitron.job[index]].safeanalytic === true) {
1049
                            continue
1050
                        }
1051
                        service = s[tarteaucitron.job[index]];
1052
                        key = service.key;
1053
                        if (tarteaucitron.state[key] !== status) {
1054
                            if (status === false && tarteaucitron.launch[key] === true) {
1055
                                tarteaucitron.reloadThePage = true;
1056
                                if (tarteaucitron.checkIfExist("tarteaucitronClosePanel")) {
1057
                                    var ariaCloseValue = document.getElementById("tarteaucitronClosePanel").textContent.trim() + " (" + tarteaucitron.lang.reload + ")";
1058
                                    document.getElementById("tarteaucitronClosePanel").setAttribute("aria-label", ariaCloseValue);
1059
                                    document.getElementById("tarteaucitronClosePanel").setAttribute("title", ariaCloseValue)
1060
                                }
1061
                            }
1062
                            if (tarteaucitron.launch[key] !== true && status === true) {
1063
                                tarteaucitron.pro("!" + key + "=engage");
1064
                                tarteaucitron.launch[key] = true;
1065
                                if (typeof tarteaucitronMagic === "undefined" || tarteaucitronMagic.indexOf("_" + key + "_") < 0) {
1066
                                    tarteaucitron.services[key].js()
1067
                                }
1068
                                tarteaucitron.sendEvent(key + "_loaded")
1069
                            }
1070
                            var itemStatusElem = document.getElementById("tacCurrentStatus" + key);
1071
                            tarteaucitron.state[key] = status;
1072
                            tarteaucitron.cookie.create(key, status);
1073
                            tarteaucitron.userInterface.color(key, status);
1074
                            if (status == true) {
1075
                                itemStatusElem.innerHTML = tarteaucitron.lang.allowed;
1076
                                tarteaucitron.sendEvent(key + "_allowed")
1077
                            } else {
1078
                                itemStatusElem.innerHTML = tarteaucitron.lang.disallowed;
1079
                                tarteaucitron.sendEvent(key + "_disallowed")
1080
                            }
1081
                        }
1082
                    }
1083
                },
1084
                respond: function(el, status) {
1085
                    "use strict";
1086
                    if (el.id === "") {
1087
                        return
1088
                    }
1089
                    var key = el.id.replace(new RegExp("(Eng[0-9]+|Allow|Deni)ed", "g"), "");
1090
                    if (key.substring(0, 13) === "tarteaucitron" || key === "") {
1091
                        return
1092
                    }
1093
                    if (tarteaucitron.state[key] === status) {
1094
                        return
1095
                    }
1096
                    if (status === false && tarteaucitron.launch[key] === true) {
1097
                        tarteaucitron.reloadThePage = true;
1098
                        if (tarteaucitron.checkIfExist("tarteaucitronClosePanel")) {
1099
                            var ariaCloseValue = document.getElementById("tarteaucitronClosePanel").textContent.trim() + " (" + tarteaucitron.lang.reload + ")";
1100
                            document.getElementById("tarteaucitronClosePanel").setAttribute("aria-label", ariaCloseValue);
1101
                            document.getElementById("tarteaucitronClosePanel").setAttribute("title", ariaCloseValue)
1102
                        }
1103
                    }
1104
                    if (status === true) {
1105
                        if (tarteaucitron.launch[key] !== true) {
1106
                            tarteaucitron.pro("!" + key + "=engage");
1107
                            tarteaucitron.launch[key] = true;
1108
                            if (typeof tarteaucitronMagic === "undefined" || tarteaucitronMagic.indexOf("_" + key + "_") < 0) {
1109
                                tarteaucitron.services[key].js()
1110
                            }
1111
                            tarteaucitron.sendEvent(key + "_loaded")
1112
                        }
1113
                    }
1114
                    var itemStatusElem = document.getElementById("tacCurrentStatus" + key);
1115
                    tarteaucitron.state[key] = status;
1116
                    tarteaucitron.cookie.create(key, status);
1117
                    tarteaucitron.userInterface.color(key, status);
1118
                    if (status == true) {
1119
                        itemStatusElem.innerHTML = tarteaucitron.lang.allowed;
1120
                        tarteaucitron.sendEvent(key + "_allowed")
1121
                    } else {
1122
                        itemStatusElem.innerHTML = tarteaucitron.lang.disallowed;
1123
                        tarteaucitron.sendEvent(key + "_disallowed")
1124
                    }
1125
                },
1126
                color: function(key, status) {
1127
                    "use strict";
1128
                    var c = "tarteaucitron",
1129
                        nbDenied = 0,
1130
                        nbPending = 0,
1131
                        nbAllowed = 0,
1132
                        sum = tarteaucitron.job.length,
1133
                        index, s = tarteaucitron.services;
1134
                    if (key !== "") {
1135
                        if (status === true) {
1136
                            tarteaucitron.userInterface.addClass(key + "Line", "tarteaucitronIsAllowed");
1137
                            tarteaucitron.userInterface.removeClass(key + "Line", "tarteaucitronIsDenied");
1138
                            document.getElementById(key + "Allowed").setAttribute("aria-pressed", "true");
1139
                            document.getElementById(key + "Denied").setAttribute("aria-pressed", "false")
1140
                        } else if (status === false) {
1141
                            tarteaucitron.userInterface.removeClass(key + "Line", "tarteaucitronIsAllowed");
1142
                            tarteaucitron.userInterface.addClass(key + "Line", "tarteaucitronIsDenied");
1143
                            document.getElementById(key + "Allowed").setAttribute("aria-pressed", "false");
1144
                            document.getElementById(key + "Denied").setAttribute("aria-pressed", "true")
1145
                        } else {
1146
                            document.getElementById(key + "Allowed").setAttribute("aria-pressed", "false");
1147
                            document.getElementById(key + "Denied").setAttribute("aria-pressed", "false")
1148
                        }
1149
                        var sumToRemove = 0;
1150
                        for (index = 0; index < sum; index += 1) {
1151
                            if (typeof s[tarteaucitron.job[index]].safeanalytic !== "undefined" && s[tarteaucitron.job[index]].safeanalytic === true) {
1152
                                sumToRemove += 1;
1153
                                continue
1154
                            }
1155
                            if (tarteaucitron.state[tarteaucitron.job[index]] === false) {
1156
                                nbDenied += 1
1157
                            } else if (tarteaucitron.state[tarteaucitron.job[index]] === undefined) {
1158
                                nbPending += 1
1159
                            } else if (tarteaucitron.state[tarteaucitron.job[index]] === true) {
1160
                                nbAllowed += 1
1161
                            }
1162
                        }
1163
                        sum -= sumToRemove;
1164
                        tarteaucitron.userInterface.css(c + "DotGreen", "width", 100 / sum * nbAllowed + "%");
1165
                        tarteaucitron.userInterface.css(c + "DotYellow", "width", 100 / sum * nbPending + "%");
1166
                        tarteaucitron.userInterface.css(c + "DotRed", "width", 100 / sum * nbDenied + "%");
1167
                        if (nbDenied === 0 && nbPending === 0) {
1168
                            tarteaucitron.userInterface.removeClass(c + "AllDenied", c + "IsSelected");
1169
                            tarteaucitron.userInterface.addClass(c + "AllAllowed", c + "IsSelected");
1170
                            tarteaucitron.userInterface.addClass(c + "MainLineOffset", c + "IsAllowed");
1171
                            tarteaucitron.userInterface.removeClass(c + "MainLineOffset", c + "IsDenied");
1172
                            document.getElementById(c + "AllDenied").setAttribute("aria-pressed", "false");
1173
                            document.getElementById(c + "AllAllowed").setAttribute("aria-pressed", "true")
1174
                        } else if (nbAllowed === 0 && nbPending === 0) {
1175
                            tarteaucitron.userInterface.removeClass(c + "AllAllowed", c + "IsSelected");
1176
                            tarteaucitron.userInterface.addClass(c + "AllDenied", c + "IsSelected");
1177
                            tarteaucitron.userInterface.removeClass(c + "MainLineOffset", c + "IsAllowed");
1178
                            tarteaucitron.userInterface.addClass(c + "MainLineOffset", c + "IsDenied");
1179
                            document.getElementById(c + "AllDenied").setAttribute("aria-pressed", "true");
1180
                            document.getElementById(c + "AllAllowed").setAttribute("aria-pressed", "false")
1181
                        } else {
1182
                            tarteaucitron.userInterface.removeClass(c + "AllAllowed", c + "IsSelected");
1183
                            tarteaucitron.userInterface.removeClass(c + "AllDenied", c + "IsSelected");
1184
                            tarteaucitron.userInterface.removeClass(c + "MainLineOffset", c + "IsAllowed");
1185
                            tarteaucitron.userInterface.removeClass(c + "MainLineOffset", c + "IsDenied");
1186
                            document.getElementById(c + "AllDenied").setAttribute("aria-pressed", "false");
1187
                            document.getElementById(c + "AllAllowed").setAttribute("aria-pressed", "false")
1188
                        }
1189
                        if (nbPending === 0) {
1190
                            tarteaucitron.userInterface.closeAlert()
1191
                        }
1192
                        if (tarteaucitron.services[key].cookies.length > 0 && status === false) {
1193
                            tarteaucitron.cookie.purge(tarteaucitron.services[key].cookies)
1194
                        }
1195
                        if (status === true) {
1196
                            if (document.getElementById("tacCL" + key) !== null) {
1197
                                document.getElementById("tacCL" + key).innerHTML = "..."
1198
                            }
1199
                            setTimeout(function() {
1200
                                tarteaucitron.cookie.checkCount(key)
1201
                            }, 2500)
1202
                        } else {
1203
                            tarteaucitron.cookie.checkCount(key)
1204
                        }
1205
                    }
1206
                    var cats = document.querySelectorAll('[id^="tarteaucitronServicesTitle_"]');
1207
                    Array.prototype.forEach.call(cats, function(item) {
1208
                        var cat = item.getAttribute("id").replace(/^(tarteaucitronServicesTitle_)/, ""),
1209
                            total = document.getElementById("tarteaucitronServices_" + cat).childElementCount;
1210
                        var doc = document.getElementById("tarteaucitronServices_" + cat),
1211
                            groupdenied = 0,
1212
                            groupallowed = 0;
1213
                        for (var ii = 0; ii < doc.children.length; ii++) {
1214
                            if (doc.children[ii].className == "tarteaucitronLine tarteaucitronIsDenied") {
1215
                                groupdenied++
1216
                            }
1217
                            if (doc.children[ii].className == "tarteaucitronLine tarteaucitronIsAllowed") {
1218
                                groupallowed++
1219
                            }
1220
                        }
1221
                        if (total === groupallowed) {
1222
                            tarteaucitron.userInterface.removeClass("tarteaucitron-group-" + cat, "tarteaucitronIsDenied");
1223
                            tarteaucitron.userInterface.addClass("tarteaucitron-group-" + cat, "tarteaucitronIsAllowed");
1224
                            if (document.getElementById("tarteaucitron-reject-group-" + cat)) {
1225
                                document.getElementById("tarteaucitron-reject-group-" + cat).setAttribute("aria-pressed", "false");
1226
                                document.getElementById("tarteaucitron-accept-group-" + cat).setAttribute("aria-pressed", "true")
1227
                            }
1228
                        }
1229
                        if (total === groupdenied) {
1230
                            tarteaucitron.userInterface.addClass("tarteaucitron-group-" + cat, "tarteaucitronIsDenied");
1231
                            tarteaucitron.userInterface.removeClass("tarteaucitron-group-" + cat, "tarteaucitronIsAllowed");
1232
                            if (document.getElementById("tarteaucitron-reject-group-" + cat)) {
1233
                                document.getElementById("tarteaucitron-reject-group-" + cat).setAttribute("aria-pressed", "true");
1234
                                document.getElementById("tarteaucitron-accept-group-" + cat).setAttribute("aria-pressed", "false")
1235
                            }
1236
                        }
1237
                        if (total !== groupdenied && total !== groupallowed) {
1238
                            tarteaucitron.userInterface.removeClass("tarteaucitron-group-" + cat, "tarteaucitronIsDenied");
1239
                            tarteaucitron.userInterface.removeClass("tarteaucitron-group-" + cat, "tarteaucitronIsAllowed");
1240
                            if (document.getElementById("tarteaucitron-reject-group-" + cat)) {
1241
                                document.getElementById("tarteaucitron-reject-group-" + cat).setAttribute("aria-pressed", "false");
1242
                                document.getElementById("tarteaucitron-accept-group-" + cat).setAttribute("aria-pressed", "false")
1243
                            }
1244
                        }
1245
                        groupdenied = 0;
1246
                        groupallowed = 0
1247
                    })
1248
                },
1249
                openPanel: function() {
1250
                    "use strict";
1251
                    tarteaucitron.userInterface.css("tarteaucitron", "display", "block");
1252
                    tarteaucitron.userInterface.css("tarteaucitronBack", "display", "block");
1253
                    tarteaucitron.userInterface.css("tarteaucitronCookiesListContainer", "display", "none");
1254
                    document.getElementById("tarteaucitronClosePanel").focus();
1255
                    if (document.getElementsByTagName("body")[0].classList !== undefined) {
1256
                        document.getElementsByTagName("body")[0].classList.add("tarteaucitron-modal-open")
1257
                    }
1258
                    tarteaucitron.userInterface.focusTrap("tarteaucitron");
1259
                    tarteaucitron.userInterface.jsSizing("main");
1260
                    var tacOpenPanelEvent;
1261
                    if (typeof Event === "function") {
1262
                        tacOpenPanelEvent = new Event("tac.open_panel")
1263
                    } else if (typeof document.createEvent === "function") {
1264
                        tacOpenPanelEvent = document.createEvent("Event");
1265
                        tacOpenPanelEvent.initEvent("tac.open_panel", true, true)
1266
                    }
1267
                    if (typeof window.dispatchEvent === "function") {
1268
                        window.dispatchEvent(tacOpenPanelEvent)
1269
                    }
1270
                },
1271
                closePanel: function() {
1272
                    "use strict";
1273
                    if (document.location.hash === tarteaucitron.hashtag) {
1274
                        if (window.history) {
1275
                            window.history.replaceState("", document.title, window.location.pathname + window.location.search)
1276
                        } else {
1277
                            document.location.hash = ""
1278
                        }
1279
                    }
1280
                    if (tarteaucitron.checkIfExist("tarteaucitron")) {
1281
                        if (tarteaucitron.checkIfExist("tarteaucitronCloseAlert")) {
1282
                            document.getElementById("tarteaucitronCloseAlert").focus()
1283
                        } else if (tarteaucitron.checkIfExist("tarteaucitronManager")) {
1284
                            document.getElementById("tarteaucitronManager").focus()
1285
                        } else if (tarteaucitron.customCloserId && tarteaucitron.checkIfExist(tarteaucitron.customCloserId)) {
1286
                            document.getElementById(tarteaucitron.customCloserId).focus()
1287
                        }
1288
                        tarteaucitron.userInterface.css("tarteaucitron", "display", "none")
1289
                    }
1290
                    if (tarteaucitron.checkIfExist("tarteaucitronCookiesListContainer") && tarteaucitron.checkIfExist("tarteaucitronCookiesNumber")) {
1291
                        document.getElementById("tarteaucitronCookiesNumber").focus();
1292
                        document.getElementById("tarteaucitronCookiesNumber").setAttribute("aria-expanded", "false");
1293
                        tarteaucitron.userInterface.css("tarteaucitronCookiesListContainer", "display", "none")
1294
                    }
1295
                    tarteaucitron.fallback(["tarteaucitronInfoBox"], function(elem) {
1296
                        elem.style.display = "none"
1297
                    }, true);
1298
                    if (tarteaucitron.reloadThePage === true) {
1299
                        window.location.reload()
1300
                    } else {
1301
                        tarteaucitron.userInterface.css("tarteaucitronBack", "display", "none")
1302
                    }
1303
                    if (document.getElementsByTagName("body")[0].classList !== undefined) {
1304
                        document.getElementsByTagName("body")[0].classList.remove("tarteaucitron-modal-open")
1305
                    }
1306
                    var tacClosePanelEvent;
1307
                    if (typeof Event === "function") {
1308
                        tacClosePanelEvent = new Event("tac.close_panel")
1309
                    } else if (typeof document.createEvent === "function") {
1310
                        tacClosePanelEvent = document.createEvent("Event");
1311
                        tacClosePanelEvent.initEvent("tac.close_panel", true, true)
1312
                    }
1313
                    if (typeof window.dispatchEvent === "function") {
1314
                        window.dispatchEvent(tacClosePanelEvent)
1315
                    }
1316
                },
1317
                focusTrap: function(parentElement) {
1318
                    "use strict";
1319
                    var focusableEls, firstFocusableEl, lastFocusableEl, filtered;
1320
                    focusableEls = document.getElementById(parentElement).querySelectorAll("a[href], button");
1321
                    filtered = [];
1322
                    for (var i = 0, max = focusableEls.length; i < max; i++) {
1323
                        if (focusableEls[i].offsetHeight > 0) {
1324
                            filtered.push(focusableEls[i])
1325
                        }
1326
                    }
1327
                    firstFocusableEl = filtered[0];
1328
                    lastFocusableEl = filtered[filtered.length - 1];
1329
                    document.getElementById(parentElement).addEventListener("keydown", function(evt) {
1330
                        if (evt.key === "Tab" || evt.keyCode === 9) {
1331
                            if (evt.shiftKey) {
1332
                                if (document.activeElement === firstFocusableEl) {
1333
                                    lastFocusableEl.focus();
1334
                                    evt.preventDefault()
1335
                                }
1336
                            } else {
1337
                                if (document.activeElement === lastFocusableEl) {
1338
                                    firstFocusableEl.focus();
1339
                                    evt.preventDefault()
1340
                                }
1341
                            }
1342
                        }
1343
                    })
1344
                },
1345
                openAlert: function() {
1346
                    "use strict";
1347
                    var c = "tarteaucitron";
1348
                    tarteaucitron.userInterface.css(c + "Percentage", "display", "block");
1349
                    tarteaucitron.userInterface.css(c + "AlertSmall", "display", "none");
1350
                    tarteaucitron.userInterface.css(c + "Icon", "display", "none");
1351
                    tarteaucitron.userInterface.css(c + "AlertBig", "display", "block");
1352
                    tarteaucitron.userInterface.addClass(c + "Root", "tarteaucitronBeforeVisible");
1353
                    var tacOpenAlertEvent;
1354
                    if (typeof Event === "function") {
1355
                        tacOpenAlertEvent = new Event("tac.open_alert")
1356
                    } else if (typeof document.createEvent === "function") {
1357
                        tacOpenAlertEvent = document.createEvent("Event");
1358
                        tacOpenAlertEvent.initEvent("tac.open_alert", true, true)
1359
                    }
1360
                    if (document.getElementById("tarteaucitronAlertBig") !== null && tarteaucitron.parameters.orientation === "middle") {
1361
                        document.getElementById("tarteaucitronAlertBig").focus()
1362
                    }
1363
                    if (typeof window.dispatchEvent === "function") {
1364
                        window.dispatchEvent(tacOpenAlertEvent)
1365
                    }
1366
                },
1367
                closeAlert: function() {
1368
                    "use strict";
1369
                    var c = "tarteaucitron";
1370
                    tarteaucitron.userInterface.css(c + "Percentage", "display", "none");
1371
                    tarteaucitron.userInterface.css(c + "AlertSmall", "display", "block");
1372
                    tarteaucitron.userInterface.css(c + "Icon", "display", "block");
1373
                    tarteaucitron.userInterface.css(c + "AlertBig", "display", "none");
1374
                    tarteaucitron.userInterface.removeClass(c + "Root", "tarteaucitronBeforeVisible");
1375
                    tarteaucitron.userInterface.jsSizing("box");
1376
                    var tacCloseAlertEvent;
1377
                    if (typeof Event === "function") {
1378
                        tacCloseAlertEvent = new Event("tac.close_alert")
1379
                    } else if (typeof document.createEvent === "function") {
1380
                        tacCloseAlertEvent = document.createEvent("Event");
1381
                        tacCloseAlertEvent.initEvent("tac.close_alert", true, true)
1382
                    }
1383
                    if (typeof window.dispatchEvent === "function") {
1384
                        window.dispatchEvent(tacCloseAlertEvent)
1385
                    }
1386
                },
1387
                toggleCookiesList: function() {
1388
                    "use strict";
1389
                    var div = document.getElementById("tarteaucitronCookiesListContainer"),
1390
                        togglediv = document.getElementById("tarteaucitronCookiesNumber");
1391
                    if (div === null) {
1392
                        return
1393
                    }
1394
                    if (div.style.display !== "block") {
1395
                        tarteaucitron.cookie.number();
1396
                        div.style.display = "block";
1397
                        togglediv.setAttribute("aria-expanded", "true");
1398
                        tarteaucitron.userInterface.jsSizing("cookie");
1399
                        tarteaucitron.userInterface.css("tarteaucitron", "display", "none");
1400
                        tarteaucitron.userInterface.css("tarteaucitronBack", "display", "block");
1401
                        tarteaucitron.fallback(["tarteaucitronInfoBox"], function(elem) {
1402
                            elem.style.display = "none"
1403
                        }, true)
1404
                    } else {
1405
                        div.style.display = "none";
1406
                        togglediv.setAttribute("aria-expanded", "false");
1407
                        tarteaucitron.userInterface.css("tarteaucitron", "display", "none");
1408
                        tarteaucitron.userInterface.css("tarteaucitronBack", "display", "none")
1409
                    }
1410
                },
1411
                toggle: function(id, closeClass) {
1412
                    "use strict";
1413
                    var div = document.getElementById(id);
1414
                    if (div === null) {
1415
                        return
1416
                    }
1417
                    if (closeClass !== undefined) {
1418
                        tarteaucitron.fallback([closeClass], function(elem) {
1419
                            if (elem.id !== id) {
1420
                                elem.style.display = "none"
1421
                            }
1422
                        }, true)
1423
                    }
1424
                    if (div.style.display !== "block") {
1425
                        div.style.display = "block"
1426
                    } else {
1427
                        div.style.display = "none"
1428
                    }
1429
                },
1430
                order: function(id) {
1431
                    "use strict";
1432
                    var main = document.getElementById("tarteaucitronServices_" + id),
1433
                        allDivs, store = [],
1434
                        i;
1435
                    if (main === null) {
1436
                        return
1437
                    }
1438
                    allDivs = main.childNodes;
1439
                    if (typeof Array.prototype.map === "function" && typeof Enumerable === "undefined") {
1440
                        Array.prototype.map.call(main.children, Object).sort(function(a, b) {
1441
                            if (tarteaucitron.services[a.id.replace(/Line/g, "")].name > tarteaucitron.services[b.id.replace(/Line/g, "")].name) {
1442
                                return 1
1443
                            }
1444
                            if (tarteaucitron.services[a.id.replace(/Line/g, "")].name < tarteaucitron.services[b.id.replace(/Line/g, "")].name) {
1445
                                return -1
1446
                            }
1447
                            return 0
1448
                        }).forEach(function(element) {
1449
                            main.appendChild(element)
1450
                        })
1451
                    }
1452
                },
1453
                jsSizing: function(type) {
1454
                    "use strict";
1455
                    var scrollbarMarginRight = 10,
1456
                        scrollbarWidthParent, scrollbarWidthChild, servicesHeight, e = window,
1457
                        a = "inner",
1458
                        windowInnerHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight,
1459
                        mainTop, mainHeight, closeButtonHeight, headerHeight, cookiesListHeight, cookiesCloseHeight, cookiesTitleHeight, paddingBox, alertSmallHeight, cookiesNumberHeight;
1460
                    if (type === "box") {
1461
                        if (document.getElementById("tarteaucitronAlertSmall") !== null && document.getElementById("tarteaucitronCookiesNumber") !== null) {
1462
                            tarteaucitron.userInterface.css("tarteaucitronCookiesNumber", "padding", "0px 10px");
1463
                            alertSmallHeight = document.getElementById("tarteaucitronAlertSmall").offsetHeight;
1464
                            cookiesNumberHeight = document.getElementById("tarteaucitronCookiesNumber").offsetHeight;
1465
                            paddingBox = (alertSmallHeight - cookiesNumberHeight) / 2;
1466
                            tarteaucitron.userInterface.css("tarteaucitronCookiesNumber", "padding", paddingBox + "px 10px")
1467
                        }
1468
                    } else if (type === "main") {
1469
                        if (window.innerWidth === undefined) {
1470
                            a = "client";
1471
                            e = document.documentElement || document.body
1472
                        }
1473
                        if (document.getElementById("tarteaucitron") !== null && document.getElementById("tarteaucitronClosePanel") !== null && document.getElementById("tarteaucitronMainLineOffset") !== null) {
1474
                            tarteaucitron.userInterface.css("tarteaucitronServices", "height", "auto");
1475
                            mainHeight = document.getElementById("tarteaucitron").offsetHeight;
1476
                            closeButtonHeight = document.getElementById("tarteaucitronClosePanel").offsetHeight;
1477
                            servicesHeight = mainHeight - closeButtonHeight + 4;
1478
                            tarteaucitron.userInterface.css("tarteaucitronServices", "height", servicesHeight + "px");
1479
                            tarteaucitron.userInterface.css("tarteaucitronServices", "overflow-x", "auto")
1480
                        }
1481
                        if (document.getElementById("tarteaucitronServices") !== null && document.getElementById("tarteaucitronScrollbarChild") !== null) {
1482
                            if (e[a + "Width"] <= 479) {} else if (e[a + "Width"] <= 767) {
1483
                                scrollbarMarginRight = 12
1484
                            }
1485
                            scrollbarWidthParent = document.getElementById("tarteaucitronServices").offsetWidth;
1486
                            scrollbarWidthChild = document.getElementById("tarteaucitronScrollbarChild").offsetWidth
1487
                        }
1488
                        if (document.getElementById("tarteaucitron") !== null) {
1489
                            if (e[a + "Width"] <= 767) {
1490
                                mainTop = 0
1491
                            } else {
1492
                                mainTop = (windowInnerHeight - document.getElementById("tarteaucitron").offsetHeight) / 2 - 21
1493
                            }
1494
                            if (document.getElementById("tarteaucitronMainLineOffset") !== null) {
1495
                                if (document.getElementById("tarteaucitron").offsetHeight < windowInnerHeight / 2) {
1496
                                    mainTop -= document.getElementById("tarteaucitronMainLineOffset").offsetHeight
1497
                                }
1498
                            }
1499
                            if (mainTop < 0) {
1500
                                mainTop = 0
1501
                            }
1502
                            tarteaucitron.userInterface.css("tarteaucitron", "top", mainTop + "px")
1503
                        }
1504
                    } else if (type === "cookie") {
1505
                        if (document.getElementById("tarteaucitronAlertSmall") !== null) {
1506
                            tarteaucitron.userInterface.css("tarteaucitronCookiesListContainer", "bottom", document.getElementById("tarteaucitronAlertSmall").offsetHeight + "px")
1507
                        }
1508
                        if (document.getElementById("tarteaucitronCookiesListContainer") !== null) {
1509
                            tarteaucitron.userInterface.css("tarteaucitronCookiesList", "height", "auto");
1510
                            cookiesListHeight = document.getElementById("tarteaucitronCookiesListContainer").offsetHeight;
1511
                            cookiesCloseHeight = document.getElementById("tarteaucitronClosePanelCookie").offsetHeight;
1512
                            cookiesTitleHeight = document.getElementById("tarteaucitronCookiesTitle").offsetHeight;
1513
                            tarteaucitron.userInterface.css("tarteaucitronCookiesList", "height", cookiesListHeight - cookiesCloseHeight - cookiesTitleHeight - 2 + "px")
1514
                        }
1515
                    }
1516
                }
1517
            },
1518
            cookie: {
1519
                owner: {},
1520
                create: function(key, status) {
1521
                    "use strict";
1522
                    if (tarteaucitronForceExpire !== "") {
1523
                        if (tarteaucitronExpireInDay && tarteaucitronForceExpire < 365 || !tarteaucitronExpireInDay && tarteaucitronForceExpire < 8760) {
1524
                            if (tarteaucitronExpireInDay) {
1525
                                timeExpire = tarteaucitronForceExpire * 864e5
1526
                            } else {
1527
                                timeExpire = tarteaucitronForceExpire * 36e5
1528
                            }
1529
                        }
1530
                    }
1531
                    var d = new Date,
1532
                        time = d.getTime(),
1533
                        expireTime = time + timeExpire,
1534
                        regex = new RegExp("!" + key + "=(wait|true|false)", "g"),
1535
                        cookie = tarteaucitron.cookie.read().replace(regex, ""),
1536
                        value = tarteaucitron.parameters.cookieName + "=" + cookie + "!" + key + "=" + status,
1537
                        domain = tarteaucitron.parameters.cookieDomain !== undefined && tarteaucitron.parameters.cookieDomain !== "" ? "; domain=" + tarteaucitron.parameters.cookieDomain : "",
1538
                        secure = location.protocol === "https:" ? "; Secure" : "";
1539
                    d.setTime(expireTime);
1540
                    document.cookie = value + "; expires=" + d.toGMTString() + "; path=/" + domain + secure + "; samesite=lax";
1541
                    tarteaucitron.sendEvent("tac.consent_updated")
1542
                },
1543
                read: function() {
1544
                    "use strict";
1545
                    var nameEQ = tarteaucitron.parameters.cookieName + "=",
1546
                        ca = document.cookie.split(";"),
1547
                        i, c;
1548
                    for (i = 0; i < ca.length; i += 1) {
1549
                        c = ca[i];
1550
                        while (c.charAt(0) === " ") {
1551
                            c = c.substring(1, c.length)
1552
                        }
1553
                        if (c.indexOf(nameEQ) === 0) {
1554
                            return c.substring(nameEQ.length, c.length)
1555
                        }
1556
                    }
1557
                    return ""
1558
                },
1559
                purge: function(arr) {
1560
                    "use strict";
1561
                    var i;
1562
                    for (i = 0; i < arr.length; i += 1) {
1563
                        var rgxpCookie = new RegExp("^(.*;)?\\s*" + arr[i] + "\\s*=\\s*[^;]+(.*)?$");
1564
                        if (document.cookie.match(rgxpCookie)) {
1565
                            document.cookie = arr[i] + "=; expires=Thu, 01 Jan 2000 00:00:00 GMT; path=/;";
1566
                            document.cookie = arr[i] + "=; expires=Thu, 01 Jan 2000 00:00:00 GMT; path=/; domain=." + location.hostname + ";";
1567
                            document.cookie = arr[i] + "=; expires=Thu, 01 Jan 2000 00:00:00 GMT; path=/; domain=." + location.hostname.split(".").slice(-2).join(".") + ";"
1568
                        }
1569
                    }
1570
                },
1571
                checkCount: function(key) {
1572
                    "use strict";
1573
                    var arr = tarteaucitron.services[key].cookies,
1574
                        nb = arr.length,
1575
                        nbCurrent = 0,
1576
                        html = "",
1577
                        i, status = document.cookie.indexOf(key + "=true");
1578
                    if (status >= 0 && nb === 0) {
1579
                        html += tarteaucitron.lang.useNoCookie
1580
                    } else if (status >= 0) {
1581
                        for (i = 0; i < nb; i += 1) {
1582
                            if (document.cookie.indexOf(arr[i] + "=") !== -1) {
1583
                                nbCurrent += 1;
1584
                                if (tarteaucitron.cookie.owner[arr[i]] === undefined) {
1585
                                    tarteaucitron.cookie.owner[arr[i]] = []
1586
                                }
1587
                                if (tarteaucitron.cookie.crossIndexOf(tarteaucitron.cookie.owner[arr[i]], tarteaucitron.services[key].name) === false) {
1588
                                    tarteaucitron.cookie.owner[arr[i]].push(tarteaucitron.services[key].name)
1589
                                }
1590
                            }
1591
                        }
1592
                        if (nbCurrent > 0) {
1593
                            html += tarteaucitron.lang.useCookieCurrent + " " + nbCurrent + " cookie";
1594
                            if (nbCurrent > 1) {
1595
                                html += "s"
1596
                            }
1597
                            html += "."
1598
                        } else {
1599
                            html += tarteaucitron.lang.useNoCookie
1600
                        }
1601
                    } else if (nb === 0) {
1602
                        html = tarteaucitron.lang.noCookie
1603
                    } else {
1604
                        html += tarteaucitron.lang.useCookie + " " + nb + " cookie";
1605
                        if (nb > 1) {
1606
                            html += "s"
1607
                        }
1608
                        html += "."
1609
                    }
1610
                    if (document.getElementById("tacCL" + key) !== null) {
1611
                        document.getElementById("tacCL" + key).innerHTML = html
1612
                    }
1613
                },
1614
                crossIndexOf: function(arr, match) {
1615
                    "use strict";
1616
                    var i;
1617
                    for (i = 0; i < arr.length; i += 1) {
1618
                        if (arr[i] === match) {
1619
                            return true
1620
                        }
1621
                    }
1622
                    return false
1623
                },
1624
                number: function() {
1625
                    "use strict";
1626
                    var cookies = document.cookie.split(";"),
1627
                        nb = document.cookie !== "" ? cookies.length : 0,
1628
                        html = "",
1629
                        i, name, namea, nameb, c, d, s = nb > 1 ? "s" : "",
1630
                        savedname, regex = /^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i,
1631
                        regexedDomain = tarteaucitron.cdn.match(regex) !== null ? tarteaucitron.cdn.match(regex)[1] : tarteaucitron.cdn,
1632
                        host = tarteaucitron.domain !== undefined ? tarteaucitron.domain : regexedDomain;
1633
                    cookies = cookies.sort(function(a, b) {
1634
                        namea = a.split("=", 1).toString().replace(/ /g, "");
1635
                        nameb = b.split("=", 1).toString().replace(/ /g, "");
1636
                        c = tarteaucitron.cookie.owner[namea] !== undefined ? tarteaucitron.cookie.owner[namea] : "0";
1637
                        d = tarteaucitron.cookie.owner[nameb] !== undefined ? tarteaucitron.cookie.owner[nameb] : "0";
1638
                        if (c + a > d + b) {
1639
                            return 1
1640
                        }
1641
                        if (c + a < d + b) {
1642
                            return -1
1643
                        }
1644
                        return 0
1645
                    });
1646
                    if (document.cookie !== "") {
1647
                        for (i = 0; i < nb; i += 1) {
1648
                            name = cookies[i].split("=", 1).toString().replace(/ /g, "");
1649
                            if (tarteaucitron.cookie.owner[name] !== undefined && tarteaucitron.cookie.owner[name].join(" // ") !== savedname) {
1650
                                savedname = tarteaucitron.cookie.owner[name].join(" // ");
1651
                                html += '<div class="tarteaucitronHidden">';
1652
                                html += '     <span class="tarteaucitronTitle tarteaucitronH3" role="heading" aria-level="3">';
1653
                                html += "        " + tarteaucitron.cookie.owner[name].join(" // ");
1654
                                html += "    </span>";
1655
                                html += '</div><ul class="cookie-list">'
1656
                            } else if (tarteaucitron.cookie.owner[name] === undefined && host !== savedname) {
1657
                                savedname = host;
1658
                                html += '<div class="tarteaucitronHidden">';
1659
                                html += '     <span class="tarteaucitronTitle tarteaucitronH3" role="heading" aria-level="3">';
1660
                                html += "        " + host;
1661
                                html += "    </span>";
1662
                                html += '</div><ul class="cookie-list">'
1663
                            }
1664
                            html += '<li class="tarteaucitronCookiesListMain">';
1665
                            html += '    <div class="tarteaucitronCookiesListLeft"><button type="button" class="purgeBtn" data-cookie="' + tarteaucitron.fixSelfXSS(cookies[i].split("=", 1)) + '"><strong>&times;</strong></button> <strong>' + tarteaucitron.fixSelfXSS(name) + "</strong>";
1666
                            html += "    </div>";
1667
                            html += '    <div class="tarteaucitronCookiesListRight">' + tarteaucitron.fixSelfXSS(cookies[i].split("=").slice(1).join("=")) + "</div>";
1668
                            html += "</li>"
1669
                        }
1670
                        html += "</ul>"
1671
                    } else {
1672
                        html += '<div class="tarteaucitronCookiesListMain">';
1673
                        html += '    <div class="tarteaucitronCookiesListLeft"><strong>-</strong></div>';
1674
                        html += '    <div class="tarteaucitronCookiesListRight"></div>';
1675
                        html += "</div>"
1676
                    }
1677
                    html += '<div class="tarteaucitronHidden tarteaucitron-spacer-20"></div>';
1678
                    if (document.getElementById("tarteaucitronCookiesList") !== null) {
1679
                        document.getElementById("tarteaucitronCookiesList").innerHTML = html
1680
                    }
1681
                    if (document.getElementById("tarteaucitronCookiesNumber") !== null) {
1682
                        document.getElementById("tarteaucitronCookiesNumber").innerHTML = nb;
1683
                        document.getElementById("tarteaucitronCookiesNumber").setAttribute("aria-label", nb + " cookie" + s + " - " + tarteaucitron.lang.toggleInfoBox);
1684
                        document.getElementById("tarteaucitronCookiesNumber").setAttribute("title", nb + " cookie" + s + " - " + tarteaucitron.lang.toggleInfoBox)
1685
                    }
1686
                    if (document.getElementById("tarteaucitronCookiesNumberBis") !== null) {
1687
                        document.getElementById("tarteaucitronCookiesNumberBis").innerHTML = nb + " cookie" + s
1688
                    }
1689
                    var purgeBtns = document.getElementsByClassName("purgeBtn");
1690
                    for (i = 0; i < purgeBtns.length; i++) {
1691
                        tarteaucitron.addClickEventToElement(purgeBtns[i], function() {
1692
                            tarteaucitron.cookie.purge([this.dataset.cookie]);
1693
                            tarteaucitron.cookie.number();
1694
                            tarteaucitron.userInterface.jsSizing("cookie");
1695
                            return false
1696
                        })
1697
                    }
1698
                    for (i = 0; i < tarteaucitron.job.length; i += 1) {
1699
                        tarteaucitron.cookie.checkCount(tarteaucitron.job[i])
1700
                    }
1701
                }
1702
            },
1703
            fixSelfXSS: function(html) {
1704
                return html.toString().replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;")
1705
            },
1706
            getLanguage: function() {
1707
                "use strict";
1708
                var availableLanguages = "ar,bg,ca,cn,cs,da,de,et,el,en,es,fi,fr,hr,hu,it,ja,kr,lb,lt,lv,nl,no,oc,pl,pt,ro,ru,se,sk,sv,tr,uk,vi,zh",
1709
                    defaultLanguage = "en";
1710
                if (tarteaucitronForceLanguage !== "") {
1711
                    if (availableLanguages.indexOf(tarteaucitronForceLanguage) !== -1) {
1712
                        return tarteaucitronForceLanguage
1713
                    }
1714
                }
1715
                if (availableLanguages.indexOf(document.documentElement.getAttribute("lang").substr(0, 2)) !== -1) {
1716
                    return document.documentElement.getAttribute("lang").substr(0, 2)
1717
                }
1718
                if (!navigator) {
1719
                    return defaultLanguage
1720
                }
1721
                var lang = navigator.language || navigator.browserLanguage || navigator.systemLanguage || navigator.userLang || null,
1722
                    userLanguage = lang ? lang.substr(0, 2) : null;
1723
                if (availableLanguages.indexOf(userLanguage) !== -1) {
1724
                    return userLanguage
1725
                }
1726
                return defaultLanguage
1727
            },
1728
            getLocale: function() {
1729
                "use strict";
1730
                if (!navigator) {
1731
                    return "en_US"
1732
                }
1733
                var lang = navigator.language || navigator.browserLanguage || navigator.systemLanguage || navigator.userLang || null,
1734
                    userLanguage = lang ? lang.substr(0, 2) : null;
1735
                if (userLanguage === "fr") {
1736
                    return "fr_FR"
1737
                } else if (userLanguage === "en") {
1738
                    return "en_US"
1739
                } else if (userLanguage === "de") {
1740
                    return "de_DE"
1741
                } else if (userLanguage === "es") {
1742
                    return "es_ES"
1743
                } else if (userLanguage === "it") {
1744
                    return "it_IT"
1745
                } else if (userLanguage === "pt") {
1746
                    return "pt_PT"
1747
                } else if (userLanguage === "nl") {
1748
                    return "nl_NL"
1749
                } else if (userLanguage === "el") {
1750
                    return "el_EL"
1751
                } else {
1752
                    return "en_US"
1753
                }
1754
            },
1755
            addScript: function(url, id, callback, execute, attrName, attrVal, internal) {
1756
                "use strict";
1757
                var script, done = false;
1758
                if (execute === false) {
1759
                    if (typeof callback === "function") {
1760
                        callback()
1761
                    }
1762
                } else {
1763
                    script = document.createElement("script");
1764
                    if (id !== undefined) {
1765
                        script.id = id
1766
                    }
1767
                    script.async = true;
1768
                    script.src = url;
1769
                    if (attrName !== undefined && attrVal !== undefined) {
1770
                        script.setAttribute(attrName, attrVal)
1771
                    }
1772
                    if (typeof callback === "function") {
1773
                        if (!tarteaucitron.parameters.useExternalJs || !internal) {
1774
                            script.onreadystatechange = script.onload = function() {
1775
                                var state = script.readyState;
1776
                                if (!done && (!state || /loaded|complete/.test(state))) {
1777
                                    done = true;
1778
                                    callback()
1779
                                }
1780
                            }
1781
                        } else {
1782
                            callback()
1783
                        }
1784
                    }
1785
                    if (!tarteaucitron.parameters.useExternalJs || !internal) {
1786
                        document.getElementsByTagName("head")[0].appendChild(script)
1787
                    }
1788
                }
1789
            },
1790
            addInternalScript: function(url, id, callback, execute, attrName, attrVal) {
1791
                tarteaucitron.addScript(url, id, callback, execute, attrName, attrVal, true)
1792
            },
1793
            checkIfExist: function(elemId) {
1794
                "use strict";
1795
                return document.getElementById(elemId) !== null && document.getElementById(elemId).offsetWidth !== 0 && document.getElementById(elemId).offsetHeight !== 0
1796
            },
1797
            makeAsync: {
1798
                antiGhost: 0,
1799
                buffer: "",
1800
                init: function(url, id) {
1801
                    "use strict";
1802
                    var savedWrite = document.write,
1803
                        savedWriteln = document.writeln;
1804
                    document.write = function(content) {
1805
                        tarteaucitron.makeAsync.buffer += content
1806
                    };
1807
                    document.writeln = function(content) {
1808
                        tarteaucitron.makeAsync.buffer += content.concat("\n")
1809
                    };
1810
                    setTimeout(function() {
1811
                        document.write = savedWrite;
1812
                        document.writeln = savedWriteln
1813
                    }, 2e4);
1814
                    tarteaucitron.makeAsync.getAndParse(url, id)
1815
                },
1816
                getAndParse: function(url, id) {
1817
                    "use strict";
1818
                    if (tarteaucitron.makeAsync.antiGhost > 9) {
1819
                        tarteaucitron.makeAsync.antiGhost = 0;
1820
                        return
1821
                    }
1822
                    tarteaucitron.makeAsync.antiGhost += 1;
1823
                    tarteaucitron.addInternalScript(url, "", function() {
1824
                        if (document.getElementById(id) !== null) {
1825
                            document.getElementById(id).innerHTML += "<span class='tarteaucitron-display-none'>&nbsp;</span>" + tarteaucitron.makeAsync.buffer;
1826
                            tarteaucitron.makeAsync.buffer = "";
1827
                            tarteaucitron.makeAsync.execJS(id)
1828
                        }
1829
                    })
1830
                },
1831
                execJS: function(id) {
1832
                    var i, scripts, childId, type;
1833
                    if (document.getElementById(id) === null) {
1834
                        return
1835
                    }
1836
                    scripts = document.getElementById(id).getElementsByTagName("script");
1837
                    for (i = 0; i < scripts.length; i += 1) {
1838
                        type = scripts[i].getAttribute("type") !== null ? scripts[i].getAttribute("type") : "";
1839
                        if (type === "") {
1840
                            type = scripts[i].getAttribute("language") !== null ? scripts[i].getAttribute("language") : ""
1841
                        }
1842
                        if (scripts[i].getAttribute("src") !== null && scripts[i].getAttribute("src") !== "") {
1843
                            childId = id + Math.floor(Math.random() * 99999999999);
1844
                            document.getElementById(id).innerHTML += '<div id="' + childId + '"></div>';
1845
                            tarteaucitron.makeAsync.getAndParse(scripts[i].getAttribute("src"), childId)
1846
                        } else if (type.indexOf("javascript") !== -1 || type === "") {
1847
                            eval(scripts[i].innerHTML)
1848
                        }
1849
                    }
1850
                }
1851
            },
1852
            fallback: function(matchClass, content, noInner) {
1853
                "use strict";
1854
                var elems = document.getElementsByTagName("*"),
1855
                    i, index = 0;
1856
                for (i in elems) {
1857
                    if (elems[i] !== undefined) {
1858
                        for (index = 0; index < matchClass.length; index += 1) {
1859
                            if ((" " + elems[i].className + " ").indexOf(" " + matchClass[index] + " ") > -1) {
1860
                                if (typeof content === "function") {
1861
                                    if (noInner === true) {
1862
                                        content(elems[i])
1863
                                    } else {
1864
                                        elems[i].innerHTML = content(elems[i])
1865
                                    }
1866
                                } else {
1867
                                    elems[i].innerHTML = content
1868
                                }
1869
                            }
1870
                        }
1871
                    }
1872
                }
1873
            },
1874
            engage: function(id) {
1875
                "use strict";
1876
                var html = "",
1877
                    r = Math.floor(Math.random() * 1e5),
1878
                    engage = tarteaucitron.services[id].name + " " + tarteaucitron.lang.fallback;
1879
                if (tarteaucitron.lang["engage-" + id] !== undefined) {
1880
                    engage = tarteaucitron.lang["engage-" + id]
1881
                }
1882
                html += '<div class="tac_activate tac_activate_' + id + '">';
1883
                html += '   <div class="tac_float">';
1884
                html += "      " + engage;
1885
                html += '      <button type="button" class="tarteaucitronAllow" id="Eng' + r + "ed" + id + '">';
1886
                html += '          <span class="tarteaucitronCheck" aria-hidden="true"></span> ' + tarteaucitron.lang.allow;
1887
                html += "       </button>";
1888
                html += "   </div>";
1889
                html += "</div>";
1890
                return html
1891
            },
1892
            extend: function(a, b) {
1893
                "use strict";
1894
                var prop;
1895
                for (prop in b) {
1896
                    if (b.hasOwnProperty(prop)) {
1897
                        a[prop] = b[prop]
1898
                    }
1899
                }
1900
            },
1901
            proTemp: "",
1902
            proTimer: function() {
1903
                "use strict";
1904
                setTimeout(tarteaucitron.proPing, Math.floor(Math.random() * (1200 - 500 + 1)) + 500)
1905
            },
1906
            pro: function(list) {
1907
                "use strict";
1908
                tarteaucitron.proTemp += list;
1909
                clearTimeout(tarteaucitron.proTimer);
1910
                tarteaucitron.proTimer = setTimeout(tarteaucitron.proPing, Math.floor(Math.random() * (1200 - 500 + 1)) + 500)
1911
            },
1912
            proPing: function() {
1913
                "use strict";
1914
                if (tarteaucitron.uuid !== "" && tarteaucitron.uuid !== undefined && tarteaucitron.proTemp !== "" && tarteaucitronStatsEnabled) {
1915
                    var div = document.getElementById("tarteaucitronPremium"),
1916
                        timestamp = (new Date).getTime(),
1917
                        url = "https://tarteaucitron.io/log/?";
1918
                    if (div === null) {
1919
                        return
1920
                    }
1921
                    url += "account=" + tarteaucitron.uuid + "&";
1922
                    url += "domain=" + tarteaucitron.domain + "&";
1923
                    url += "status=" + encodeURIComponent(tarteaucitron.proTemp) + "&";
1924
                    url += "_time=" + timestamp;
1925
                    div.innerHTML = '<img src="' + url + '" class="tarteaucitron-display-none" alt="" />';
1926
                    tarteaucitron.proTemp = ""
1927
                }
1928
                tarteaucitron.cookie.number()
1929
            },
1930
            AddOrUpdate: function(source, custom) {
1931
                for (var key in custom) {
1932
                    if (custom[key] instanceof Object) {
1933
                        source[key] = tarteaucitron.AddOrUpdate(source[key], custom[key])
1934
                    } else {
1935
                        source[key] = custom[key]
1936
                    }
1937
                }
1938
                return source
1939
            },
1940
            getElemWidth: function(elem) {
1941
                return tarteaucitron.getElemAttr(elem, "width") || elem.clientWidth
1942
            },
1943
            getElemHeight: function(elem) {
1944
                return tarteaucitron.getElemAttr(elem, "height") || elem.clientHeight
1945
            },
1946
            getElemAttr: function(elem, attr) {
1947
                var attribute = elem.getAttribute("data-" + attr) || elem.getAttribute(attr);
1948
                if (typeof attribute === "string") {
1949
                    return tarteaucitron.fixSelfXSS(attribute)
1950
                }
1951
                return ""
1952
            },
1953
            addClickEventToId: function(elemId, func) {
1954
                tarteaucitron.addClickEventToElement(document.getElementById(elemId), func)
1955
            },
1956
            addClickEventToElement: function(e, func) {
1957
                if (e) {
1958
                    if (e.addEventListener) {
1959
                        e.addEventListener("click", func)
1960
                    } else {
1961
                        e.attachEvent("onclick", func)
1962
                    }
1963
                }
1964
            },
1965
            triggerJobsAfterAjaxCall: function() {
1966
                tarteaucitron.job.forEach(function(e) {
1967
                    tarteaucitron.job.push(e)
1968
                });
1969
                var i;
1970
                var allowBtns = document.getElementsByClassName("tarteaucitronAllow");
1971
                for (i = 0; i < allowBtns.length; i++) {
1972
                    tarteaucitron.addClickEventToElement(allowBtns[i], function() {
1973
                        tarteaucitron.userInterface.respond(this, true)
1974
                    })
1975
                }
1976
                var denyBtns = document.getElementsByClassName("tarteaucitronDeny");
1977
                for (i = 0; i < denyBtns.length; i++) {
1978
                    tarteaucitron.addClickEventToElement(denyBtns[i], function() {
1979
                        tarteaucitron.userInterface.respond(this, false)
1980
                    })
1981
                }
1982
            }
1983
        };
